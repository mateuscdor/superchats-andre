'use strict';const a13_0x49ebe1=a13_0x8b08;(function(_0x5a2f64,_0x5e4c5e){const _0x2f9894=a13_0x8b08,_0x2b9b16=_0x5a2f64();while(!![]){try{const _0xb17bc6=parseInt(_0x2f9894(0x1d0))/0x1*(parseInt(_0x2f9894(0x212))/0x2)+parseInt(_0x2f9894(0x1f8))/0x3+parseInt(_0x2f9894(0x203))/0x4*(-parseInt(_0x2f9894(0x267))/0x5)+parseInt(_0x2f9894(0x1da))/0x6+-parseInt(_0x2f9894(0x253))/0x7*(parseInt(_0x2f9894(0x23a))/0x8)+parseInt(_0x2f9894(0x287))/0x9+parseInt(_0x2f9894(0x1ed))/0xa*(-parseInt(_0x2f9894(0x202))/0xb);if(_0xb17bc6===_0x5e4c5e)break;else _0x2b9b16['push'](_0x2b9b16['shift']());}catch(_0x2b0cef){_0x2b9b16['push'](_0x2b9b16['shift']());}}}(a13_0x2a9f,0x5f06c));var __createBinding=this&&this[a13_0x49ebe1(0x1f4)]||(Object['create']?function(_0x391781,_0x1f05b9,_0x2bf8ca,_0x540431){if(_0x540431===undefined)_0x540431=_0x2bf8ca;Object['defineProperty'](_0x391781,_0x540431,{'enumerable':!![],'get':function(){return _0x1f05b9[_0x2bf8ca];}});}:function(_0x19b4c7,_0x5f1d86,_0x1c30a5,_0x362b45){if(_0x362b45===undefined)_0x362b45=_0x1c30a5;_0x19b4c7[_0x362b45]=_0x5f1d86[_0x1c30a5];}),__setModuleDefault=this&&this[a13_0x49ebe1(0x236)]||(Object['create']?function(_0x3f8aa7,_0x12a6a1){const _0x40a4e4=a13_0x49ebe1;Object[_0x40a4e4(0x24e)](_0x3f8aa7,_0x40a4e4(0x277),{'enumerable':!![],'value':_0x12a6a1});}:function(_0x4b0b80,_0x2d0104){const _0x23379b=a13_0x49ebe1;_0x4b0b80[_0x23379b(0x277)]=_0x2d0104;}),__importStar=this&&this[a13_0x49ebe1(0x27e)]||function(_0x893d2b){const _0x3ed274=a13_0x49ebe1;if(_0x893d2b&&_0x893d2b['__esModule'])return _0x893d2b;var _0x4ee30f={};if(_0x893d2b!=null){for(var _0x1aefba in _0x893d2b)if(_0x1aefba!=='default'&&Object['prototype'][_0x3ed274(0x214)][_0x3ed274(0x1eb)](_0x893d2b,_0x1aefba))__createBinding(_0x4ee30f,_0x893d2b,_0x1aefba);}return __setModuleDefault(_0x4ee30f,_0x893d2b),_0x4ee30f;},__importDefault=this&&this[a13_0x49ebe1(0x251)]||function(_0x393305){const _0x2c7d87=a13_0x49ebe1;return _0x393305&&_0x393305[_0x2c7d87(0x1cf)]?_0x393305:{'default':_0x393305};};Object[a13_0x49ebe1(0x24e)](exports,a13_0x49ebe1(0x1cf),{'value':!![]}),exports[a13_0x49ebe1(0x25c)]=exports[a13_0x49ebe1(0x20e)]=exports['encryptedStream']=exports[a13_0x49ebe1(0x24d)]=exports[a13_0x49ebe1(0x279)]=exports[a13_0x49ebe1(0x261)]=exports[a13_0x49ebe1(0x1c7)]=exports[a13_0x49ebe1(0x207)]=exports[a13_0x49ebe1(0x209)]=exports[a13_0x49ebe1(0x1e9)]=exports[a13_0x49ebe1(0x24a)]=exports[a13_0x49ebe1(0x1fe)]=exports['getMediaKeys']=exports[a13_0x49ebe1(0x1d8)]=exports[a13_0x49ebe1(0x1df)]=exports['generateClientID']=exports[a13_0x49ebe1(0x21e)]=exports[a13_0x49ebe1(0x1e7)]=exports[a13_0x49ebe1(0x238)]=exports[a13_0x49ebe1(0x216)]=exports[a13_0x49ebe1(0x242)]=exports[a13_0x49ebe1(0x265)]=exports[a13_0x49ebe1(0x24f)]=exports[a13_0x49ebe1(0x282)]=exports[a13_0x49ebe1(0x276)]=exports['hmacSign']=exports[a13_0x49ebe1(0x201)]=exports[a13_0x49ebe1(0x1e2)]=exports[a13_0x49ebe1(0x263)]=exports[a13_0x49ebe1(0x230)]=exports[a13_0x49ebe1(0x217)]=exports['newMessagesDB']=exports[a13_0x49ebe1(0x262)]=exports['whatsappID']=exports['GET_MESSAGE_ID']=exports['WA_MESSAGE_ID']=exports[a13_0x49ebe1(0x1f7)]=exports[a13_0x49ebe1(0x1e4)]=exports['toNumber']=exports[a13_0x49ebe1(0x1f2)]=exports[a13_0x49ebe1(0x232)]=void 0x0;const Crypto=__importStar(require(a13_0x49ebe1(0x22f))),stream_1=require(a13_0x49ebe1(0x272)),futoin_hkdf_1=__importDefault(require(a13_0x49ebe1(0x1c8))),jimp_1=__importDefault(require(a13_0x49ebe1(0x1ce))),fs_1=require('fs'),child_process_1=require(a13_0x49ebe1(0x268)),os_1=require('os'),https_proxy_agent_1=__importDefault(require('https-proxy-agent')),variables_1=require(a13_0x49ebe1(0x21c)),FluidDB_1=__importDefault(require(a13_0x49ebe1(0x1cc))),got_1=__importDefault(require(a13_0x49ebe1(0x24b))),path_1=require(a13_0x49ebe1(0x285)),events_1=require('events'),path=__importStar(require(a13_0x49ebe1(0x285))),bs=require(a13_0x49ebe1(0x200));require(a13_0x49ebe1(0x248))[a13_0x49ebe1(0x23e)]({'path':path['resolve'](__dirname,a13_0x49ebe1(0x234))}),exports[a13_0x49ebe1(0x232)]=process['env'][a13_0x49ebe1(0x26e)];const platformMap={'aix':'AIX','darwin':a13_0x49ebe1(0x233),'win32':a13_0x49ebe1(0x1fa),'android':'Android'};exports['Browsers']={'ubuntu':_0x22f168=>[a13_0x49ebe1(0x244),_0x22f168,a13_0x49ebe1(0x20a)],'macOS':_0x50c2e6=>[a13_0x49ebe1(0x233),_0x50c2e6,a13_0x49ebe1(0x1f0)],'WP':_0x35f06f=>[exports[a13_0x49ebe1(0x232)],_0x35f06f,a13_0x49ebe1(0x23f)],'appropriate':_0x480728=>[platformMap[os_1['platform']()]||a13_0x49ebe1(0x244),_0x480728,os_1['release']()]};const toNumber=_0x408e29=>_0x408e29[a13_0x49ebe1(0x1cb)]||_0x408e29;exports[a13_0x49ebe1(0x1f1)]=toNumber;const waChatKey=_0x1e80e4=>({'key':_0x1ea110=>(_0x1e80e4?_0x1ea110[a13_0x49ebe1(0x1e8)]?'1':'0':'')+(_0x1ea110[a13_0x49ebe1(0x1c9)]==='true'?'0':'1')+_0x1ea110['t'][a13_0x49ebe1(0x25f)](0x10)['padStart'](0x8,'0')+_0x1ea110['jid'],'compare':(_0x32914b,_0x16c718)=>_0x16c718[a13_0x49ebe1(0x1ee)](_0x32914b)});exports[a13_0x49ebe1(0x1e4)]=waChatKey,exports[a13_0x49ebe1(0x1f7)]={'key':_0x376841=>(0x1388+(_0x376841[a13_0x49ebe1(0x1f9)]||0x0))['toString'](0x10)[a13_0x49ebe1(0x1ff)](0x6,'0')+exports['toNumber'](_0x376841[a13_0x49ebe1(0x226)])['toString'](0x10)[a13_0x49ebe1(0x1ff)](0x8,'0'),'compare':(_0x39dd58,_0x5c5351)=>_0x39dd58[a13_0x49ebe1(0x1ee)](_0x5c5351)};const WA_MESSAGE_ID=_0x150d95=>exports['GET_MESSAGE_ID'](_0x150d95[a13_0x49ebe1(0x286)]);exports[a13_0x49ebe1(0x25b)]=WA_MESSAGE_ID;const GET_MESSAGE_ID=_0x4f810c=>_0x4f810c['id']+'|'+(_0x4f810c['fromMe']?0x1:0x0);exports[a13_0x49ebe1(0x215)]=GET_MESSAGE_ID;const whatsappID=_0x58e2a0=>_0x58e2a0===null||_0x58e2a0===void 0x0?void 0x0:_0x58e2a0[a13_0x49ebe1(0x22c)](a13_0x49ebe1(0x256),a13_0x49ebe1(0x22e));exports['whatsappID']=whatsappID;const isGroupID=_0x36e5b9=>_0x36e5b9===null||_0x36e5b9===void 0x0?void 0x0:_0x36e5b9[a13_0x49ebe1(0x259)](a13_0x49ebe1(0x1fc));exports[a13_0x49ebe1(0x262)]=isGroupID;const newMessagesDB=(_0x3d7c2c=[])=>{const _0x2e000a=a13_0x49ebe1,_0x129cec=new FluidDB_1[(_0x2e000a(0x277))](exports[_0x2e000a(0x1f7)],exports[_0x2e000a(0x25b)]);return _0x3d7c2c['forEach'](_0x2ef544=>!_0x129cec[_0x2e000a(0x25e)](exports[_0x2e000a(0x25b)](_0x2ef544))&&_0x129cec[_0x2e000a(0x235)](_0x2ef544)),_0x129cec;};exports[a13_0x49ebe1(0x21b)]=newMessagesDB;function a13_0x8b08(_0x32b791,_0x196777){const _0x2a9f48=a13_0x2a9f();return a13_0x8b08=function(_0x8b0804,_0x2ad0d8){_0x8b0804=_0x8b0804-0x1c7;let _0x27cc67=_0x2a9f48[_0x8b0804];return _0x27cc67;},a13_0x8b08(_0x32b791,_0x196777);}function shallowChanges(_0x59b2cf,_0x39c54f,{lookForDeletedKeys:_0x2c74de}){let _0x3e4892={};for(let _0x4ec175 in _0x39c54f){_0x59b2cf[_0x4ec175]!==_0x39c54f[_0x4ec175]&&(_0x3e4892[_0x4ec175]=_0x39c54f[_0x4ec175]||null);}if(_0x2c74de)for(let _0x4309f9 in _0x59b2cf){!_0x3e4892[_0x4309f9]&&_0x59b2cf[_0x4309f9]!==_0x39c54f[_0x4309f9]&&(_0x3e4892[_0x4309f9]=_0x39c54f[_0x4309f9]||null);}return _0x3e4892;}exports[a13_0x49ebe1(0x217)]=shallowChanges;function aesDecrypt(_0x33972d,_0x101367){const _0x45a4c8=a13_0x49ebe1;return aesDecryptWithIV(_0x33972d[_0x45a4c8(0x220)](0x10,_0x33972d[_0x45a4c8(0x241)]),_0x101367,_0x33972d['slice'](0x0,0x10));}exports['aesDecrypt']=aesDecrypt;function aesDecryptWithIV(_0x298457,_0x532a71,_0x428cac){const _0x187e6e=a13_0x49ebe1,_0x2d6517=Crypto[_0x187e6e(0x1f5)](_0x187e6e(0x25a),_0x532a71,_0x428cac);return Buffer[_0x187e6e(0x27f)]([_0x2d6517['update'](_0x298457),_0x2d6517[_0x187e6e(0x245)]()]);}exports['aesDecryptWithIV']=aesDecryptWithIV;function aesEncrypt(_0x1cb1b0,_0xd6f7e0){const _0x3e7643=a13_0x49ebe1,_0x513a9f=randomBytes(0x10),_0x19e154=Crypto[_0x3e7643(0x266)](_0x3e7643(0x25a),_0xd6f7e0,_0x513a9f);return Buffer[_0x3e7643(0x27f)]([_0x513a9f,_0x19e154[_0x3e7643(0x1fd)](_0x1cb1b0),_0x19e154[_0x3e7643(0x245)]()]);}exports[a13_0x49ebe1(0x1e2)]=aesEncrypt;function aesEncrypWithIV(_0xeb5b54,_0x33a594,_0x48e386){const _0x13ab51=a13_0x49ebe1,_0x5646cf=Crypto[_0x13ab51(0x266)](_0x13ab51(0x25a),_0x33a594,_0x48e386);return Buffer[_0x13ab51(0x27f)]([_0x5646cf[_0x13ab51(0x1fd)](_0xeb5b54),_0x5646cf[_0x13ab51(0x245)]()]);}exports[a13_0x49ebe1(0x201)]=aesEncrypWithIV;function hmacSign(_0xa85e62,_0x2779a5){const _0x5e20b1=a13_0x49ebe1;return Crypto[_0x5e20b1(0x1f3)](_0x5e20b1(0x276),_0x2779a5)[_0x5e20b1(0x1fd)](_0xa85e62)[_0x5e20b1(0x255)]();}exports[a13_0x49ebe1(0x250)]=hmacSign;function sha256(_0x141b8a){const _0x7d9b70=a13_0x49ebe1;return Crypto['createHash'](_0x7d9b70(0x276))[_0x7d9b70(0x1fd)](_0x141b8a)[_0x7d9b70(0x255)]();}exports[a13_0x49ebe1(0x276)]=sha256;function hkdf(_0xa94408,_0x1ddf6d,_0x233a15=null){const _0x2e186a=a13_0x49ebe1;return futoin_hkdf_1[_0x2e186a(0x277)](_0xa94408,_0x1ddf6d,{'salt':Buffer[_0x2e186a(0x27c)](0x20),'info':_0x233a15,'hash':'SHA-256'});}exports[a13_0x49ebe1(0x282)]=hkdf;function randomBytes(_0x207547){const _0x2c912d=a13_0x49ebe1;return Crypto[_0x2c912d(0x24f)](_0x207547);}exports[a13_0x49ebe1(0x24f)]=randomBytes;function a13_0x2a9f(){const _0x19a3d5=['BRAND','Mac\x20OS','../../.env','insert','__setModuleDefault','Transform','delayCancellable','parse','13696KYJajV','promises','00:00:00','height','config','3.0','fileSha256','length','debouncedTimeout','\x20-vframes\x201\x20-f\x20image2\x20','Ubuntu','final','could\x20not\x20generate\x20video\x20thumb:\x20','then','dotenv','startsWith','generateProfilePicture','got','width','getGotStream','defineProperty','randomBytes','hmacSign','__importDefault','keys','1743MxBxST','url','digest','@c.us','location','video','endsWith','aes-256-cbc','WA_MESSAGE_ID','extensionForMediaMessage','response','get','toString','getBufferAsync','getStream','isGroupID','aesDecryptWithIV','Invalid\x20code\x20(','unixTimestampSeconds','createCipheriv','1463585hyAvij','child_process','productMessage','catch','parseBuffer','end','.enc','NAME','mediaKey','floor','equals','stream','parseStream','readFile','format','sha256','default','resize','generateThumbnail','base64','productImage','alloc','audio\x20messages\x20cannot\x20have\x20thumbnails','__importStar','concat','close','createHash','hkdf','push','recieved\x20encrypted\x20buffer\x20when\x20auth\x20creds\x20unavailable','path','key','5956218rjRGbO','toReadable','futoin-hkdf','archive','Readable','low','../db/FluidDB','tmpdir','jimp','__esModule','1aVNXLZ','getTime','cannot\x20decode\x20text\x20message','http://','values','duration','string','read','decryptWA','.jpg','1367094yUCWbm','Erros','from','file',')\x20returned','generateMessageID','createWriteStream','toUpperCase','aesEncrypt','ffmpeg\x20-ss\x20','waChatKey','DEFAULT_ORIGIN','hex','promiseTimeout','pin','ProxyAgent','data:;base64,','call','exec','6310RRyCwv','localeCompare','finally','10.15.3','toNumber','Browsers','createHmac','__createBinding','createDecipheriv','error','waMessageKey','2313912RKuuXr','epoch','Windows','once','@g.us','update','compressImage','padStart','atob','aesEncrypWithIV','11561Luxtzf','8GIaqhG','audio','checksum\x20failed','invalid\x20message','getAudioDuration','MIME_JPEG','mediaMessageSHA256B64','18.04','MessageType','isBuffer','write','decryptMediaMessageBuffer','text','buffer','3EB0','806352LIFIyS','product','hasOwnProperty','GET_MESSAGE_ID','delay','shallowChanges','.--','mimetype','pipe','newMessagesDB','./variables','unknown\x20message\x20type','generateMessageTag','thumbnail','slice','join','music-metadata','\x20-y\x20-s\x20','TimedOutError','extendedText','messageTimestamp','stack','split','crop','getWidth','log','replace','remote','@s.whatsapp.net','crypto','aesDecrypt','encryptedStream'];a13_0x2a9f=function(){return _0x19a3d5;};return a13_0x2a9f();}const unixTimestampSeconds=(_0x3997fe=new Date())=>Math['floor'](_0x3997fe[a13_0x49ebe1(0x1d1)]()/0x3e8);exports[a13_0x49ebe1(0x265)]=unixTimestampSeconds;const debouncedTimeout=(_0x399bbf=0x3e8,_0x3873ce=undefined)=>{let _0xc3feee;return{'start':(_0x1c6a0b,_0x12b46b)=>{_0x3873ce=_0x12b46b||_0x3873ce,_0x399bbf=_0x1c6a0b||_0x399bbf,_0xc3feee&&clearTimeout(_0xc3feee),_0xc3feee=setTimeout(_0x3873ce,_0x399bbf);},'cancel':()=>{_0xc3feee&&clearTimeout(_0xc3feee),_0xc3feee=undefined;},'setTask':_0x617c2c=>_0x3873ce=_0x617c2c,'setInterval':_0x45d294=>_0x399bbf=_0x45d294};};exports[a13_0x49ebe1(0x242)]=debouncedTimeout;const delay=_0x132572=>exports['delayCancellable'](_0x132572)[a13_0x49ebe1(0x216)];exports[a13_0x49ebe1(0x216)]=delay;const delayCancellable=_0x31e484=>{const _0x442d05=new Error()['stack'];let _0x28e8d5,_0x1766b3;const _0xf17654=new Promise((_0x205d6f,_0x5d094e)=>{_0x28e8d5=setTimeout(_0x205d6f,_0x31e484),_0x1766b3=_0x5d094e;}),_0x1167a5=()=>{clearTimeout(_0x28e8d5),_0x1766b3(variables_1['CancelledError'](_0x442d05));};return{'delay':_0xf17654,'cancel':_0x1167a5};};exports[a13_0x49ebe1(0x238)]=delayCancellable;async function promiseTimeout(_0x48186a,_0x168fca){const _0x1e3eee=a13_0x49ebe1;if(!_0x48186a)return new Promise(_0x168fca);const _0x3ca65a=new Error()[_0x1e3eee(0x227)];let {delay:_0x269b95,cancel:_0x2bdad1}=exports['delayCancellable'](_0x48186a);const _0x2f20f1=new Promise((_0x2d2e44,_0x47e139)=>{const _0x18e62b=_0x1e3eee;_0x269b95[_0x18e62b(0x247)](()=>_0x47e139(variables_1[_0x18e62b(0x224)](_0x3ca65a)))[_0x18e62b(0x26a)](_0x84f03b=>_0x47e139(_0x84f03b)),_0x168fca(_0x2d2e44,_0x47e139);})[_0x1e3eee(0x1ef)](_0x2bdad1);return _0x2f20f1;}exports[a13_0x49ebe1(0x1e7)]=promiseTimeout;function generateMessageTag(_0x49206a){const _0x30d977=a13_0x49ebe1;let _0x80cc2b=exports['unixTimestampSeconds']()[_0x30d977(0x25f)]();if(_0x49206a)_0x80cc2b+=_0x30d977(0x218)+_0x49206a;return _0x80cc2b;}exports['generateMessageTag']=generateMessageTag;function generateClientID(){const _0x471308=a13_0x49ebe1;return randomBytes(0x10)['toString'](_0x471308(0x27a));}exports['generateClientID']=generateClientID;function generateMessageID(){const _0xd8ba0e=a13_0x49ebe1;return _0xd8ba0e(0x211)+randomBytes(0x4)[_0xd8ba0e(0x25f)](_0xd8ba0e(0x1e6))[_0xd8ba0e(0x1e1)]();}exports[a13_0x49ebe1(0x1df)]=generateMessageID;function decryptWA(_0x428860,_0x4e6c16,_0x80e14a,_0x28e5a7,_0x21b9e8=![]){const _0x3459df=a13_0x49ebe1;let _0x344105=_0x428860['indexOf'](',');if(_0x344105<0x0)throw new variables_1['Erros'](_0x3459df(0x206),{'message':_0x428860});if(_0x428860[_0x344105+0x1]===',')_0x344105+=0x1;let _0x52e591=_0x428860[_0x3459df(0x220)](_0x344105+0x1,_0x428860[_0x3459df(0x241)]);const _0x338e69=_0x428860[_0x3459df(0x220)](0x0,_0x344105)[_0x3459df(0x25f)]();let _0x1bcdf9,_0x4de4ec;if(_0x52e591[_0x3459df(0x241)]>0x0){if(typeof _0x52e591===_0x3459df(0x1d6))_0x1bcdf9=JSON[_0x3459df(0x239)](_0x52e591);else{if(!_0x4e6c16||!_0x80e14a)throw new variables_1[(_0x3459df(0x1db))](_0x3459df(0x284),{'message':_0x428860});_0x21b9e8&&(_0x4de4ec=[_0x52e591[0x0],_0x52e591[0x1]],_0x52e591=_0x52e591['slice'](0x2,_0x52e591['length']));const _0x3cb3df=_0x52e591[_0x3459df(0x220)](0x0,0x20);_0x52e591=_0x52e591[_0x3459df(0x220)](0x20,_0x52e591['length']);const _0x334b49=hmacSign(_0x52e591,_0x4e6c16);if(_0x3cb3df[_0x3459df(0x271)](_0x334b49)){const _0x413ac5=aesDecrypt(_0x52e591,_0x80e14a);_0x1bcdf9=_0x28e5a7[_0x3459df(0x1d7)](_0x413ac5);}else throw new variables_1['Erros'](_0x3459df(0x205),{'received':_0x3cb3df[_0x3459df(0x25f)](_0x3459df(0x1e6)),'computed':_0x334b49[_0x3459df(0x25f)](_0x3459df(0x1e6)),'data':_0x52e591[_0x3459df(0x220)](0x0,0x50)['toString'](),'tag':_0x338e69,'message':_0x428860[_0x3459df(0x220)](0x0,0x50)[_0x3459df(0x25f)]()});}}return[_0x338e69,_0x1bcdf9,_0x4de4ec];}exports['decryptWA']=decryptWA;function getMediaKeys(_0x63abd3,_0x35193f){const _0x2f812a=a13_0x49ebe1;typeof _0x63abd3===_0x2f812a(0x1d6)&&(_0x63abd3=Buffer[_0x2f812a(0x1dc)](_0x63abd3[_0x2f812a(0x22c)](_0x2f812a(0x1ea),''),_0x2f812a(0x27a)));const _0x342b1d=hkdf(_0x63abd3,0x70,variables_1['HKDFInfoKeys'][_0x35193f]);return{'iv':_0x342b1d[_0x2f812a(0x220)](0x0,0x10),'cipherKey':_0x342b1d[_0x2f812a(0x220)](0x10,0x30),'macKey':_0x342b1d['slice'](0x30,0x50)};}exports['getMediaKeys']=getMediaKeys;const extractVideoThumb=async(_0x4fb727,_0x2f1a33,_0x29cfb3,_0x456aad)=>new Promise((_0x2918a7,_0x26dacf)=>{const _0x524fe8=a13_0x49ebe1,_0x53e6f1=_0x524fe8(0x1e3)+_0x29cfb3+'\x20-i\x20'+_0x4fb727+_0x524fe8(0x223)+_0x456aad[_0x524fe8(0x24c)]+'x'+_0x456aad[_0x524fe8(0x23d)]+_0x524fe8(0x243)+_0x2f1a33;child_process_1[_0x524fe8(0x1ec)](_0x53e6f1,_0x288049=>{if(_0x288049)_0x26dacf(_0x288049);else _0x2918a7();});}),compressImage=async _0x534c98=>{const _0x4a2573=a13_0x49ebe1,_0x216f57=await jimp_1[_0x4a2573(0x277)][_0x4a2573(0x1d7)](_0x534c98),_0x2625cd=await _0x216f57[_0x4a2573(0x278)](0x30,0x30)['getBufferAsync'](jimp_1[_0x4a2573(0x277)][_0x4a2573(0x208)]);return _0x2625cd;};exports[a13_0x49ebe1(0x1fe)]=compressImage;const generateProfilePicture=async _0x803550=>{const _0x59d6c7=a13_0x49ebe1,_0x3d5906=await jimp_1['default'][_0x59d6c7(0x1d7)](_0x803550),_0x27060d=Math['min'](_0x3d5906[_0x59d6c7(0x22a)](),_0x3d5906['getHeight']()),_0x44bef0=_0x3d5906[_0x59d6c7(0x229)](0x0,0x0,_0x27060d,_0x27060d);return{'img':await _0x44bef0[_0x59d6c7(0x278)](0x280,0x280)['getBufferAsync'](jimp_1['default'][_0x59d6c7(0x208)]),'preview':await _0x44bef0[_0x59d6c7(0x278)](0x60,0x60)[_0x59d6c7(0x260)](jimp_1['default'][_0x59d6c7(0x208)])};};exports['generateProfilePicture']=generateProfilePicture;const ProxyAgent=_0x17de50=>https_proxy_agent_1['default'](_0x17de50);exports[a13_0x49ebe1(0x1e9)]=ProxyAgent;const mediaMessageSHA256B64=_0x3fb840=>{const _0x3db646=a13_0x49ebe1,_0x560bf9=Object[_0x3db646(0x1d4)](_0x3fb840)[0x0];return(_0x560bf9===null||_0x560bf9===void 0x0?void 0x0:_0x560bf9[_0x3db646(0x240)])&&Buffer[_0x3db646(0x1dc)](_0x560bf9[_0x3db646(0x240)])[_0x3db646(0x25f)](_0x3db646(0x27a));};exports['mediaMessageSHA256B64']=mediaMessageSHA256B64;async function getAudioDuration(_0x2d4f06){const _0x52d3c8=a13_0x49ebe1,_0x2e6adb=await Promise['resolve']()[_0x52d3c8(0x247)](()=>__importStar(require(_0x52d3c8(0x222))));let _0x3d3c65;if(Buffer[_0x52d3c8(0x20c)](_0x2d4f06))_0x3d3c65=await _0x2e6adb[_0x52d3c8(0x26b)](_0x2d4f06,null,{'duration':!![]});else{const _0x557fdb=fs_1['createReadStream'](_0x2d4f06);_0x3d3c65=await _0x2e6adb[_0x52d3c8(0x273)](_0x557fdb,null,{'duration':!![]}),_0x557fdb[_0x52d3c8(0x280)]();}return _0x3d3c65[_0x52d3c8(0x275)][_0x52d3c8(0x1d5)];}exports[a13_0x49ebe1(0x207)]=getAudioDuration;const toReadable=_0x49a7f2=>{const _0x1938d8=a13_0x49ebe1,_0x21b7d4=new stream_1['Readable']({'read':()=>{}});return _0x21b7d4[_0x1938d8(0x283)](_0x49a7f2),_0x21b7d4[_0x1938d8(0x283)](null),_0x21b7d4;};exports['toReadable']=toReadable;const getStream=async _0x571bd7=>{const _0x321a13=a13_0x49ebe1;if(Buffer[_0x321a13(0x20c)](_0x571bd7))return{'stream':exports['toReadable'](_0x571bd7),'type':_0x321a13(0x210)};if(_0x571bd7[_0x321a13(0x254)][_0x321a13(0x25f)]()[_0x321a13(0x249)](_0x321a13(0x1d3))||_0x571bd7['url'][_0x321a13(0x25f)]()[_0x321a13(0x249)]('https://'))return{'stream':await exports[_0x321a13(0x24d)](_0x571bd7[_0x321a13(0x254)]),'type':_0x321a13(0x22d)};return{'stream':fs_1['createReadStream'](_0x571bd7[_0x321a13(0x254)]),'type':_0x321a13(0x1dd)};};exports[a13_0x49ebe1(0x261)]=getStream;async function generateThumbnail(_0x5e36bd,_0x3f469e,_0x458816){const _0x32f1c1=a13_0x49ebe1;if(_0x32f1c1(0x21f)in _0x458816){if(_0x3f469e===variables_1[_0x32f1c1(0x20b)][_0x32f1c1(0x204)])throw new Error(_0x32f1c1(0x27d));}else{if(_0x3f469e===variables_1[_0x32f1c1(0x20b)]['image']){const _0x4e9a72=await exports['compressImage'](_0x5e36bd);_0x458816['thumbnail']=_0x4e9a72[_0x32f1c1(0x25f)](_0x32f1c1(0x27a));}else{if(_0x3f469e===variables_1[_0x32f1c1(0x20b)][_0x32f1c1(0x258)]){const _0x3d7152=path_1[_0x32f1c1(0x221)](os_1[_0x32f1c1(0x1cd)](),generateMessageID()+_0x32f1c1(0x1d9));try{await extractVideoThumb(_0x5e36bd,_0x3d7152,_0x32f1c1(0x23c),{'width':0x30,'height':0x30});const _0x2297e9=await fs_1[_0x32f1c1(0x23b)][_0x32f1c1(0x274)](_0x3d7152);_0x458816[_0x32f1c1(0x21f)]=_0x2297e9[_0x32f1c1(0x25f)](_0x32f1c1(0x27a)),await fs_1['promises']['unlink'](_0x3d7152);}catch(_0x1091a9){console[_0x32f1c1(0x22b)](_0x32f1c1(0x246)+_0x1091a9);}}}}}exports[a13_0x49ebe1(0x279)]=generateThumbnail;const getGotStream=async(_0x1bb283,_0x34fd7e={})=>{const _0x1df5be=a13_0x49ebe1,_0x38048e=got_1['default'][_0x1df5be(0x272)](_0x1bb283,{..._0x34fd7e,'isStream':!![]});return await new Promise((_0x2d9730,_0x3cc172)=>{const _0x421aca=_0x1df5be;_0x38048e[_0x421aca(0x1fb)](_0x421aca(0x1f6),_0x3cc172),_0x38048e[_0x421aca(0x1fb)](_0x421aca(0x25d),({statusCode:_0x174bdc})=>{const _0x1a28ca=_0x421aca;_0x174bdc>=0x190?_0x3cc172(new variables_1[(_0x1a28ca(0x1db))](_0x1a28ca(0x264)+_0x174bdc+_0x1a28ca(0x1de),{'status':_0x174bdc})):_0x2d9730(undefined);});}),_0x38048e;};exports['getGotStream']=getGotStream;const encryptedStream=async(_0x5de2b3,_0xf56b2d,_0x4ac127=!![])=>{const _0x1dc953=a13_0x49ebe1,{stream:_0x30ec52,type:_0x11d6e6}=await exports['getStream'](_0x5de2b3),_0x54693a=randomBytes(0x20),{cipherKey:_0x12aa48,iv:_0x535dd4,macKey:_0x489d87}=getMediaKeys(_0x54693a,_0xf56b2d),_0x4d6d91=path_1[_0x1dc953(0x221)](os_1[_0x1dc953(0x1cd)](),_0xf56b2d+generateMessageID()+_0x1dc953(0x26d)),_0x10ddf3=fs_1['createWriteStream'](_0x4d6d91);let _0x437a53,_0x169331;if(_0x11d6e6===_0x1dc953(0x1dd))_0x437a53=_0x5de2b3[_0x1dc953(0x254)];else _0x4ac127&&(_0x437a53=path_1[_0x1dc953(0x221)](os_1['tmpdir'](),_0xf56b2d+generateMessageID()),_0x169331=fs_1[_0x1dc953(0x1e0)](_0x437a53));let _0x4debc5=0x0;const _0x426ac9=Crypto['createCipheriv'](_0x1dc953(0x25a),_0x12aa48,_0x535dd4);let _0x15e3d9=Crypto[_0x1dc953(0x1f3)](_0x1dc953(0x276),_0x489d87)['update'](_0x535dd4),_0x3fcb7c=Crypto['createHash'](_0x1dc953(0x276)),_0x34fd8a=Crypto[_0x1dc953(0x281)](_0x1dc953(0x276));const _0x3e23c9=_0x520672=>{const _0x58c4f9=_0x1dc953;_0x34fd8a=_0x34fd8a[_0x58c4f9(0x1fd)](_0x520672),_0x15e3d9=_0x15e3d9['update'](_0x520672),_0x10ddf3[_0x58c4f9(0x20d)](_0x520672);};for await(const _0x1a0f09 of _0x30ec52){_0x4debc5+=_0x1a0f09[_0x1dc953(0x241)],_0x3fcb7c=_0x3fcb7c['update'](_0x1a0f09);if(_0x169331&&!_0x169331['write'](_0x1a0f09))await events_1[_0x1dc953(0x1fb)](_0x169331,'drain');_0x3e23c9(_0x426ac9[_0x1dc953(0x1fd)](_0x1a0f09));}_0x3e23c9(_0x426ac9[_0x1dc953(0x245)]());const _0x48c079=_0x15e3d9['digest']()[_0x1dc953(0x220)](0x0,0xa);_0x34fd8a=_0x34fd8a[_0x1dc953(0x1fd)](_0x48c079);const _0x221363=_0x3fcb7c[_0x1dc953(0x255)](),_0x526bbe=_0x34fd8a[_0x1dc953(0x255)]();return _0x10ddf3['write'](_0x48c079),_0x10ddf3['end'](),_0x169331&&_0x169331[_0x1dc953(0x26c)](),{'mediaKey':_0x54693a,'encBodyPath':_0x4d6d91,'bodyPath':_0x437a53,'mac':_0x48c079,'fileEncSha256':_0x526bbe,'fileSha256':_0x221363,'fileLength':_0x4debc5,'didSaveToTmpPath':_0x11d6e6!==_0x1dc953(0x1dd)};};exports[a13_0x49ebe1(0x231)]=encryptedStream;async function decryptMediaMessageBuffer(_0x12d5a2){const _0x161488=a13_0x49ebe1;var _0x43e1b2;const _0x90c8d0=Object['keys'](_0x12d5a2)[0x0];if(!_0x90c8d0)throw new variables_1[(_0x161488(0x1db))](_0x161488(0x21d),_0x12d5a2);if(_0x90c8d0===variables_1['MessageType'][_0x161488(0x20f)]||_0x90c8d0===variables_1[_0x161488(0x20b)][_0x161488(0x225)])throw new variables_1[(_0x161488(0x1db))](_0x161488(0x1d2),_0x12d5a2);if(_0x90c8d0===variables_1[_0x161488(0x20b)][_0x161488(0x257)]||_0x90c8d0===variables_1[_0x161488(0x20b)]['liveLocation']){const _0x178bda=Buffer[_0x161488(0x1dc)](_0x12d5a2[_0x90c8d0]['jpegThumbnail']),_0x47d2a6=new stream_1[(_0x161488(0x1ca))]({'read':()=>{}});return _0x47d2a6['push'](_0x178bda),_0x47d2a6[_0x161488(0x283)](null),_0x47d2a6;}let _0x58531d;if(_0x12d5a2['productMessage']){const _0x4b0d35=(_0x43e1b2=_0x12d5a2[_0x161488(0x269)][_0x161488(0x213)])===null||_0x43e1b2===void 0x0?void 0x0:_0x43e1b2[_0x161488(0x27b)];if(!_0x4b0d35)throw new variables_1[(_0x161488(0x1db))]('product\x20has\x20no\x20image',_0x12d5a2);_0x58531d=_0x4b0d35;}else _0x58531d=_0x12d5a2[_0x90c8d0];const _0xbdf761=await exports[_0x161488(0x24d)](_0x58531d[_0x161488(0x254)],{'headers':{'Origin':variables_1[_0x161488(0x1e5)]}});let _0x542c9c=Buffer[_0x161488(0x1dc)]([]);const {cipherKey:_0x55c511,iv:_0x2651d5}=getMediaKeys(_0x58531d[_0x161488(0x26f)],_0x90c8d0),_0x22c4f4=Crypto[_0x161488(0x1f5)](_0x161488(0x25a),_0x55c511,_0x2651d5),_0x2b6732=new stream_1[(_0x161488(0x237))]({'transform'(_0x235509,_0x36cfdf,_0x4ab731){const _0xbfc785=_0x161488;let _0x56bdeb=Buffer[_0xbfc785(0x27f)]([_0x542c9c,_0x235509]);const _0x391fd1=Math[_0xbfc785(0x270)](_0x56bdeb['length']/0x10)*0x10;_0x542c9c=_0x56bdeb[_0xbfc785(0x220)](_0x391fd1),_0x56bdeb=_0x56bdeb[_0xbfc785(0x220)](0x0,_0x391fd1);try{this[_0xbfc785(0x283)](_0x22c4f4[_0xbfc785(0x1fd)](_0x56bdeb)),_0x4ab731();}catch(_0x4dc67){_0x4ab731(_0x4dc67);}},'final'(_0x58afac){const _0xb131ed=_0x161488;try{this[_0xb131ed(0x283)](_0x22c4f4[_0xb131ed(0x245)]()),_0x58afac();}catch(_0x96b77f){_0x58afac(_0x96b77f);}}});return _0xbdf761[_0x161488(0x21a)](_0x2b6732,{'end':!![]});}exports['decryptMediaMessageBuffer']=decryptMediaMessageBuffer;function extensionForMediaMessage(_0x262400){const _0x5e462f=a13_0x49ebe1,_0x31ceb2=_0x29b4f7=>_0x29b4f7['split'](';')[0x0][_0x5e462f(0x228)]('/')[0x1],_0x47f69f=Object[_0x5e462f(0x252)](_0x262400)[0x0];let _0x25f064;if(_0x47f69f===variables_1[_0x5e462f(0x20b)]['location']||_0x47f69f===variables_1[_0x5e462f(0x20b)]['liveLocation']||_0x47f69f===variables_1[_0x5e462f(0x20b)]['product'])_0x25f064='.jpeg';else{const _0x4dc331=_0x262400[_0x47f69f];_0x25f064=_0x31ceb2(_0x4dc331[_0x5e462f(0x219)]);}return _0x25f064;}exports[a13_0x49ebe1(0x25c)]=extensionForMediaMessage;