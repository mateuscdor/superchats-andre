'use strict';function a39_0x4394(_0x54ce60,_0x474352){const _0x46de23=a39_0x46de();return a39_0x4394=function(_0x439412,_0x563539){_0x439412=_0x439412-0x177;let _0xd8f3=_0x46de23[_0x439412];return _0xd8f3;},a39_0x4394(_0x54ce60,_0x474352);}const a39_0x3dea40=a39_0x4394;function a39_0x46de(){const _0x35eaec=['jidToSignalProtocolAddress','firstUnuploadedPreKeyId','encryptSenderKeyMsgSignalProto','SessionCipher','2649003UZfYlS','decrypt','4021720MGDkBM','2542984NJOjcZ','parseAndInjectE2ESession','3534608EKLqNh','pkmsg','setSenderKey','list','create','hasOwnProperty','processSenderKeyMessage','SessionRecord','jidToSignalSenderKeyName','value','keyPair','toString','948PnXPMF','12157140VFVvJb','./crypto','generateKeyPair','generateOrGetPreKeys','jidDecode','identity','14480mSySUB','signedPreKey','from','msg','GroupCipher','GroupSessionBuilder','key','SenderKeyRecord','getBinaryNodeChildUInt','jid','device','decryptWhisperMessage','SenderKeyName','encodeBigEndian','xmppSignedPreKey','getSenderKey','device-list','xmppPreKey','9frvIuF','keyId','content','signature','../signal','user','getPreKeys','call','split','447788dITDkn','extractDeviceJids','initOutgoing','__esModule','getBinaryNodeChildBuffer','SessionBuilder','signalStorage','getPreKey','deserialize','attrs','registration','keys','public','getBinaryNodeChild','prototype','2smpxmp','decryptSignalProto','binary','setPreKey','nextPreKeyId','decryptPreKeyWhisperMessage','generateSignalPubKey','defineProperty','push','skey','private','isArray','encrypt','decryptGroupSignalProto','set','setSession','../bin','libsignal','default','axolotlSenderKeyDistributionMessage','registrationId','serialize'];a39_0x46de=function(){return _0x35eaec;};return a39_0x46de();}(function(_0x11837e,_0x4eebc4){const _0xa64e9e=a39_0x4394,_0xe0803a=_0x11837e();while(!![]){try{const _0x5a490b=-parseInt(_0xa64e9e(0x1be))/0x1*(parseInt(_0xa64e9e(0x1cd))/0x2)+-parseInt(_0xa64e9e(0x18b))/0x3+parseInt(_0xa64e9e(0x18d))/0x4+parseInt(_0xa64e9e(0x1a3))/0x5*(-parseInt(_0xa64e9e(0x19c))/0x6)+parseInt(_0xa64e9e(0x190))/0x7+parseInt(_0xa64e9e(0x18e))/0x8*(-parseInt(_0xa64e9e(0x1b5))/0x9)+parseInt(_0xa64e9e(0x19d))/0xa;if(_0x5a490b===_0x4eebc4)break;else _0xe0803a['push'](_0xe0803a['shift']());}catch(_0x31ad27){_0xe0803a['push'](_0xe0803a['shift']());}}}(a39_0x46de,0x97552));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x136c1d,_0x5675be,_0x59554f,_0x2f3619){const _0x257c80=a39_0x4394;if(_0x2f3619===undefined)_0x2f3619=_0x59554f;Object[_0x257c80(0x178)](_0x136c1d,_0x2f3619,{'enumerable':!![],'get':function(){return _0x5675be[_0x59554f];}});}:function(_0x1094c0,_0x1c94af,_0x17a3e7,_0x481a6c){if(_0x481a6c===undefined)_0x481a6c=_0x17a3e7;_0x1094c0[_0x481a6c]=_0x1c94af[_0x17a3e7];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a39_0x3dea40(0x194)]?function(_0x1a5aec,_0x596201){const _0x5b36a5=a39_0x3dea40;Object['defineProperty'](_0x1a5aec,_0x5b36a5(0x183),{'enumerable':!![],'value':_0x596201});}:function(_0x51fa0e,_0x867cd6){_0x51fa0e['default']=_0x867cd6;}),__importStar=this&&this['__importStar']||function(_0x546390){const _0x33db34=a39_0x3dea40;if(_0x546390&&_0x546390[_0x33db34(0x1c1)])return _0x546390;var _0x1c56c8={};if(_0x546390!=null){for(var _0x2d7d9a in _0x546390)if(_0x2d7d9a!==_0x33db34(0x183)&&Object[_0x33db34(0x1cc)][_0x33db34(0x195)][_0x33db34(0x1bc)](_0x546390,_0x2d7d9a))__createBinding(_0x1c56c8,_0x546390,_0x2d7d9a);}return __setModuleDefault(_0x1c56c8,_0x546390),_0x1c56c8;};Object[a39_0x3dea40(0x178)](exports,a39_0x3dea40(0x1c1),{'value':!![]}),exports['extractDeviceJids']=exports[a39_0x3dea40(0x18f)]=exports[a39_0x3dea40(0x189)]=exports['encryptSignalProto']=exports[a39_0x3dea40(0x1ce)]=exports[a39_0x3dea40(0x196)]=exports[a39_0x3dea40(0x17e)]=exports[a39_0x3dea40(0x1c4)]=exports[a39_0x3dea40(0x1b4)]=exports[a39_0x3dea40(0x1b1)]=exports[a39_0x3dea40(0x1a0)]=exports[a39_0x3dea40(0x1bb)]=exports['createSignalIdentity']=exports['jidToSignalSenderKeyName']=exports[a39_0x3dea40(0x187)]=exports[a39_0x3dea40(0x177)]=void 0x0;const libsignal=__importStar(require(a39_0x3dea40(0x182))),generics_1=require('./generics'),crypto_1=require(a39_0x3dea40(0x19e)),signal_1=require(a39_0x3dea40(0x1b9)),bin_1=require(a39_0x3dea40(0x181)),generateSignalPubKey=_0x2c02af=>{const _0x3b0bec=a39_0x3dea40,_0x3333a5=Buffer['alloc'](0x21);return _0x3333a5[_0x3b0bec(0x17f)]([0x5],0x0),_0x3333a5[_0x3b0bec(0x17f)](_0x2c02af,0x1),_0x3333a5;};exports[a39_0x3dea40(0x177)]=generateSignalPubKey;const jidToSignalAddress=_0x308ba8=>_0x308ba8[a39_0x3dea40(0x1bd)]('@')[0x0],jidToSignalProtocolAddress=_0x1b0d5e=>{return new libsignal['ProtocolAddress'](jidToSignalAddress(_0x1b0d5e),0x0);};exports['jidToSignalProtocolAddress']=jidToSignalProtocolAddress;const jidToSignalSenderKeyName=(_0x5057c0,_0x3e057a)=>{const _0x40cc49=a39_0x3dea40;return new signal_1[(_0x40cc49(0x1af))](_0x5057c0,(0x0,exports['jidToSignalProtocolAddress'])(_0x3e057a))[_0x40cc49(0x19b)]();};exports['jidToSignalSenderKeyName']=jidToSignalSenderKeyName;const createSignalIdentity=(_0x50e661,_0x41532c)=>{const _0x5aa911=a39_0x3dea40;return{'identifier':{'name':_0x50e661,'deviceId':0x0},'identifierKey':(0x0,exports[_0x5aa911(0x177)])(_0x41532c)};};exports['createSignalIdentity']=createSignalIdentity;const getPreKeys=async({getPreKey:_0x36bcdb},_0x51a795,_0x59c670)=>{const _0x2b8906={};for(let _0x45c6ac=_0x51a795;_0x45c6ac<_0x59c670;_0x45c6ac++){const _0x1a4da0=await _0x36bcdb(_0x45c6ac);if(_0x1a4da0)_0x2b8906[+_0x45c6ac]=_0x1a4da0;}return _0x2b8906;};exports[a39_0x3dea40(0x1bb)]=getPreKeys;const generateOrGetPreKeys=(_0x37ff33,_0x14ddba)=>{const _0x19f813=a39_0x3dea40,_0x3d5802=_0x37ff33[_0x19f813(0x1d1)]-_0x37ff33[_0x19f813(0x188)],_0x237ed5=_0x14ddba-_0x3d5802,_0x259d2f=_0x37ff33[_0x19f813(0x1d1)]+_0x237ed5-0x1,_0x13b54b={};if(_0x237ed5>0x0)for(let _0x139017=_0x37ff33[_0x19f813(0x1d1)];_0x139017<=_0x259d2f;_0x139017++){_0x13b54b[_0x139017]=crypto_1['Curve'][_0x19f813(0x19f)]();}return{'newPreKeys':_0x13b54b,'lastPreKeyId':_0x259d2f,'preKeysRange':[_0x37ff33['firstUnuploadedPreKeyId'],_0x14ddba]};};exports[a39_0x3dea40(0x1a0)]=generateOrGetPreKeys;const xmppSignedPreKey=_0x264c57=>({'tag':a39_0x3dea40(0x17a),'attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,generics_1[a39_0x3dea40(0x1b0)])(_0x264c57[a39_0x3dea40(0x1b6)],0x3)},{'tag':a39_0x3dea40(0x199),'attrs':{},'content':_0x264c57['keyPair'][a39_0x3dea40(0x1ca)]},{'tag':a39_0x3dea40(0x1b8),'attrs':{},'content':_0x264c57[a39_0x3dea40(0x1b8)]}]});exports[a39_0x3dea40(0x1b1)]=xmppSignedPreKey;const xmppPreKey=(_0x1251a2,_0x5c27a7)=>({'tag':a39_0x3dea40(0x1a9),'attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,generics_1[a39_0x3dea40(0x1b0)])(_0x5c27a7,0x3)},{'tag':a39_0x3dea40(0x199),'attrs':{},'content':_0x1251a2[a39_0x3dea40(0x1ca)]}]});exports[a39_0x3dea40(0x1b4)]=xmppPreKey;const signalStorage=({creds:_0x1619e8,keys:_0x2bb21d})=>({'loadSession':async _0xcd21ac=>{const _0x1e57e1=a39_0x3dea40,_0x3a93a0=await _0x2bb21d['getSession'](_0xcd21ac);if(_0x3a93a0)return libsignal[_0x1e57e1(0x197)][_0x1e57e1(0x1c6)](_0x3a93a0);},'storeSession':async(_0x563685,_0x2e8915)=>{const _0x3b957b=a39_0x3dea40;await _0x2bb21d[_0x3b957b(0x180)](_0x563685,_0x2e8915[_0x3b957b(0x186)]());},'isTrustedIdentity':()=>{return!![];},'loadPreKey':async _0x2b3dff=>{const _0x35001a=a39_0x3dea40,_0x39a6ba=await _0x2bb21d[_0x35001a(0x1c5)](_0x2b3dff);if(_0x39a6ba)return{'privKey':Buffer[_0x35001a(0x1a5)](_0x39a6ba[_0x35001a(0x17b)]),'pubKey':Buffer[_0x35001a(0x1a5)](_0x39a6ba[_0x35001a(0x1ca)])};},'removePreKey':_0x28e9c3=>_0x2bb21d[a39_0x3dea40(0x1d0)](_0x28e9c3,null),'loadSignedPreKey':_0x20b401=>{const _0x3bd1ee=a39_0x3dea40,_0x42b76f=_0x1619e8[_0x3bd1ee(0x1a4)];return{'privKey':Buffer['from'](_0x42b76f[_0x3bd1ee(0x19a)][_0x3bd1ee(0x17b)]),'pubKey':Buffer['from'](_0x42b76f[_0x3bd1ee(0x19a)][_0x3bd1ee(0x1ca)])};},'loadSenderKey':async _0x12e588=>{const _0x50b163=a39_0x3dea40,_0xbdcf9e=await _0x2bb21d[_0x50b163(0x1b2)](_0x12e588);if(_0xbdcf9e)return new signal_1[(_0x50b163(0x1aa))](_0xbdcf9e);},'storeSenderKey':async(_0xf9a259,_0x5b7bd4)=>{const _0x487634=a39_0x3dea40;await _0x2bb21d[_0x487634(0x192)](_0xf9a259,_0x5b7bd4[_0x487634(0x186)]());},'getOurRegistrationId':()=>_0x1619e8[a39_0x3dea40(0x185)],'getOurIdentity':()=>{const _0x2807e9=a39_0x3dea40,{signedIdentityKey:_0x5386da}=_0x1619e8;return{'privKey':Buffer[_0x2807e9(0x1a5)](_0x5386da[_0x2807e9(0x17b)]),'pubKey':(0x0,exports[_0x2807e9(0x177)])(_0x5386da[_0x2807e9(0x1ca)])};}});exports['signalStorage']=signalStorage;const decryptGroupSignalProto=(_0x161253,_0x5bd5e0,_0x21641c,_0x2c6152)=>{const _0xb107d2=a39_0x3dea40,_0x3059cb=(0x0,exports[_0xb107d2(0x198)])(_0x161253,_0x5bd5e0),_0x4ea6ce=new signal_1[(_0xb107d2(0x1a7))]((0x0,exports[_0xb107d2(0x1c4)])(_0x2c6152),_0x3059cb);return _0x4ea6ce[_0xb107d2(0x18c)](Buffer[_0xb107d2(0x1a5)](_0x21641c));};exports[a39_0x3dea40(0x17e)]=decryptGroupSignalProto;const processSenderKeyMessage=async(_0x15e5aa,_0x1fbd92,_0x41b0cd)=>{const _0x35ff60=a39_0x3dea40,_0x1a87e8=new signal_1[(_0x35ff60(0x1a8))]((0x0,exports[_0x35ff60(0x1c4)])(_0x41b0cd)),_0x230681=(0x0,exports[_0x35ff60(0x198)])(_0x1fbd92['groupId'],_0x15e5aa),_0x47518c=new signal_1['SenderKeyDistributionMessage'](null,null,null,null,_0x1fbd92[_0x35ff60(0x184)]),_0x1317f6=await _0x41b0cd['keys']['getSenderKey'](_0x230681);if(!_0x1317f6){const _0x542bc9=new signal_1[(_0x35ff60(0x1aa))]();await _0x41b0cd[_0x35ff60(0x1c9)][_0x35ff60(0x192)](_0x230681,_0x542bc9);}await _0x1a87e8['process'](_0x230681,_0x47518c);};exports[a39_0x3dea40(0x196)]=processSenderKeyMessage;const decryptSignalProto=async(_0x2133c3,_0x258612,_0x2e2028,_0x131432)=>{const _0xc52d28=a39_0x3dea40,_0x59d022=(0x0,exports[_0xc52d28(0x187)])(_0x2133c3),_0x2ef3a5=new libsignal['SessionCipher']((0x0,exports[_0xc52d28(0x1c4)])(_0x131432),_0x59d022);let _0x559596;switch(_0x258612){case _0xc52d28(0x191):_0x559596=await _0x2ef3a5[_0xc52d28(0x1d2)](_0x2e2028);break;case _0xc52d28(0x1a6):_0x559596=await _0x2ef3a5[_0xc52d28(0x1ae)](_0x2e2028);break;}return _0x559596;};exports[a39_0x3dea40(0x1ce)]=decryptSignalProto;const encryptSignalProto=async(_0x370d44,_0x1bf577,_0x3340f4)=>{const _0x4eb51f=a39_0x3dea40,_0x53ad1f=(0x0,exports[_0x4eb51f(0x187)])(_0x370d44),_0x592783=new libsignal[(_0x4eb51f(0x18a))]((0x0,exports[_0x4eb51f(0x1c4)])(_0x3340f4),_0x53ad1f),{type:_0x3af136,body:_0x4ce25f}=await _0x592783[_0x4eb51f(0x17d)](_0x1bf577);return{'type':_0x3af136===0x3?_0x4eb51f(0x191):'msg','ciphertext':Buffer['from'](_0x4ce25f,_0x4eb51f(0x1cf))};};exports['encryptSignalProto']=encryptSignalProto;const encryptSenderKeyMsgSignalProto=async(_0x3a02c0,_0x1c1bf6,_0x25f304,_0x476389)=>{const _0x2a0738=a39_0x3dea40,_0x3ce6dd=(0x0,exports[_0x2a0738(0x1c4)])(_0x476389),_0x3d2507=(0x0,exports['jidToSignalSenderKeyName'])(_0x3a02c0,_0x25f304),_0xe68d17=new signal_1[(_0x2a0738(0x1a8))](_0x3ce6dd),_0x428af8=await _0x476389['keys']['getSenderKey'](_0x3d2507);if(!_0x428af8){const _0x435c57=new signal_1[(_0x2a0738(0x1aa))]();await _0x476389[_0x2a0738(0x1c9)]['setSenderKey'](_0x3d2507,_0x435c57);}const _0x29e975=await _0xe68d17[_0x2a0738(0x194)](_0x3d2507),_0x37cb24=new signal_1[(_0x2a0738(0x1a7))](_0x3ce6dd,_0x3d2507);return{'ciphertext':await _0x37cb24[_0x2a0738(0x17d)](_0x1c1bf6),'senderKeyDistributionMessageKey':_0x29e975[_0x2a0738(0x186)]()};};exports[a39_0x3dea40(0x189)]=encryptSenderKeyMsgSignalProto;const parseAndInjectE2ESession=async(_0x19f3c6,_0x57aa07)=>{const _0x29e248=a39_0x3dea40,_0x3b3af5=_0x1045a8=>_0x1045a8?{'keyId':(0x0,bin_1[_0x29e248(0x1ab)])(_0x1045a8,'id',0x3),'publicKey':(0x0,exports[_0x29e248(0x177)])((0x0,bin_1[_0x29e248(0x1c2)])(_0x1045a8,_0x29e248(0x199))),'signature':(0x0,bin_1[_0x29e248(0x1c2)])(_0x1045a8,_0x29e248(0x1b8))}:undefined;_0x19f3c6=(0x0,bin_1[_0x29e248(0x1cb)])((0x0,bin_1[_0x29e248(0x1cb)])(_0x19f3c6,'list'),_0x29e248(0x1ba)),(0x0,bin_1['assertNodeErrorFree'])(_0x19f3c6);const _0x15675e=(0x0,bin_1['getBinaryNodeChild'])(_0x19f3c6,_0x29e248(0x17a)),_0xe6c2a2=(0x0,bin_1[_0x29e248(0x1cb)])(_0x19f3c6,_0x29e248(0x1a9)),_0x37ba8a=(0x0,bin_1[_0x29e248(0x1c2)])(_0x19f3c6,_0x29e248(0x1a2)),_0x3c38e7=_0x19f3c6[_0x29e248(0x1c7)][_0x29e248(0x1ac)],_0x3303f7=(0x0,bin_1['getBinaryNodeChildUInt'])(_0x19f3c6,_0x29e248(0x1c8),0x4),_0x21df62={'registrationId':_0x3303f7,'identityKey':(0x0,exports[_0x29e248(0x177)])(_0x37ba8a),'signedPreKey':_0x3b3af5(_0x15675e),'preKey':_0x3b3af5(_0xe6c2a2)},_0x4cc356=new libsignal[(_0x29e248(0x1c3))]((0x0,exports[_0x29e248(0x1c4)])(_0x57aa07),(0x0,exports['jidToSignalProtocolAddress'])(_0x3c38e7));await _0x4cc356[_0x29e248(0x1c0)](_0x21df62);};exports[a39_0x3dea40(0x18f)]=parseAndInjectE2ESession;const extractDeviceJids=(_0x2fdb85,_0x289ef3,_0x47951d)=>{const _0x1bf2c6=a39_0x3dea40;var _0x412c83;const _0x53ada9=[];for(const _0x2a151d of _0x2fdb85['content']){const _0x55cb24=(_0x412c83=(0x0,bin_1[_0x1bf2c6(0x1cb)])(_0x2a151d,_0x1bf2c6(0x193)))===null||_0x412c83===void 0x0?void 0x0:_0x412c83['content'];if(_0x55cb24&&Array[_0x1bf2c6(0x17c)](_0x55cb24))for(const _0x4304f6 of _0x55cb24){const {user:_0x26ee18}=(0x0,bin_1[_0x1bf2c6(0x1a1)])(_0x4304f6[_0x1bf2c6(0x1c7)][_0x1bf2c6(0x1ac)]),_0x213b50=(0x0,bin_1[_0x1bf2c6(0x1cb)])(_0x4304f6,'devices'),_0x16e5a1=(0x0,bin_1[_0x1bf2c6(0x1cb)])(_0x213b50,_0x1bf2c6(0x1b3));if(Array['isArray'](_0x16e5a1===null||_0x16e5a1===void 0x0?void 0x0:_0x16e5a1[_0x1bf2c6(0x1b7)]))for(const {tag:_0x38cad6,attrs:_0x13737b}of _0x16e5a1[_0x1bf2c6(0x1b7)]){const _0x49f899=+_0x13737b['id'];_0x38cad6===_0x1bf2c6(0x1ad)&&_0x289ef3!==_0x49f899&&(!_0x47951d||_0x49f899!==0x0)&&_0x53ada9[_0x1bf2c6(0x179)]({'user':_0x26ee18,'device':_0x49f899});}}}return _0x53ada9;};exports[a39_0x3dea40(0x1bf)]=extractDeviceJids;