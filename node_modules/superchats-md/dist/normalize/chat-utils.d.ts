/// <reference types="node" />
import { AuthenticationState, WAPatchCreate, ChatMutation, WAPatchName, LTHashState, ChatModification } from "../model";
import { proto } from '../binary';
import { BinaryNode } from '../bin';
export declare const mutationKeys: (keydata: Uint8Array) => {
    indexKey: Buffer;
    valueEncryptionKey: Buffer;
    valueMacKey: Buffer;
    snapshotMacKey: Buffer;
    patchMacKey: Buffer;
};
export declare const generateSnapshotMac: (lthash: Uint8Array, version: number, name: WAPatchName, key: Buffer) => Buffer;
export declare const encodeSyncdPatch: ({ type, index, syncAction, apiVersion }: WAPatchCreate, { creds: { myAppStateKeyId }, keys }: AuthenticationState) => Promise<{
    patch: proto.ISyncdPatch;
    state: {
        version: number;
        hash: Buffer;
        mutations: ChatMutation[];
    };
}>;
export declare const decodeSyncdPatch: (msg: proto.ISyncdPatch, name: WAPatchName, { keys }: AuthenticationState, validateMacs?: boolean) => Promise<{
    mutations: ChatMutation[];
}>;
export declare const extractSyncdPatches: (result: BinaryNode) => {
    critical_block: proto.ISyncdPatch[];
    critical_unblock_low: proto.ISyncdPatch[];
    regular_low: proto.ISyncdPatch[];
    regular_high: proto.ISyncdPatch[];
    regular: proto.ISyncdPatch[];
};
export declare const downloadExternalPatch: (blob: proto.IExternalBlobReference) => Promise<proto.SyncdMutations>;
export declare const decodePatches: (name: WAPatchName, syncds: proto.ISyncdPatch[], initial: LTHashState, auth: AuthenticationState, validateMacs?: boolean) => Promise<{
    newMutations: ChatMutation[];
    state: LTHashState;
}>;
export declare const chatModificationToAppPatch: (mod: ChatModification, jid: string, lastMessages: Pick<proto.IWebMessageInfo, 'key' | 'messageTimestamp'>[]) => WAPatchCreate;
