'use strict';const a11_0x4d7e43=a11_0x4bff;(function(_0x1402a2,_0x54480b){const _0x5ed9ad=a11_0x4bff,_0x144b82=_0x1402a2();while(!![]){try{const _0x39b317=parseInt(_0x5ed9ad(0x13a))/0x1*(-parseInt(_0x5ed9ad(0x109))/0x2)+-parseInt(_0x5ed9ad(0x102))/0x3+-parseInt(_0x5ed9ad(0x106))/0x4*(parseInt(_0x5ed9ad(0x11f))/0x5)+-parseInt(_0x5ed9ad(0x149))/0x6*(-parseInt(_0x5ed9ad(0x12f))/0x7)+parseInt(_0x5ed9ad(0x121))/0x8*(-parseInt(_0x5ed9ad(0x115))/0x9)+-parseInt(_0x5ed9ad(0x15f))/0xa+parseInt(_0x5ed9ad(0xf4))/0xb;if(_0x39b317===_0x54480b)break;else _0x144b82['push'](_0x144b82['shift']());}catch(_0xa11bcc){_0x144b82['push'](_0x144b82['shift']());}}}(a11_0x50b7,0x4228f));var __importDefault=this&&this[a11_0x4d7e43(0x155)]||function(_0xc2c83e){return _0xc2c83e&&_0xc2c83e['__esModule']?_0xc2c83e:{'default':_0xc2c83e};};Object[a11_0x4d7e43(0xf9)](exports,a11_0x4d7e43(0x139),{'value':!![]}),exports[a11_0x4d7e43(0x116)]=void 0x0;function a11_0x50b7(){const _0x150158=['host','@hapi/boom','jidDecode','toString','set','agent','../bin','edit','read','query','media_conn','value','default','18xJpgUW','\x20additional\x20devices','keys','hosts','getSession','get','usync','S_WHATSAPP_NET','g.us','post','fetched\x20media\x20conn','undefined','__importDefault','message','encrypt','stringify','creds','ttl','&token=','emitOwnEvents','fetchDate','getTime','3025350xeJBvs','slice','DEFAULT_ORIGIN','length','got','w:m','identity',',\x20retrying...','name','sending\x20message','messages.upsert','find','hostname','list','read-self','true','16751251dEzGTb','getBinaryNodeChild','generateWAMessage','boolean','all','defineProperty','./groups_aditionais','upload\x20failed,\x20reason:\x20','participants','readreceipts','getBinaryNodeChildren','item','skmsg','encode','1312671URgPal','push','auth','userDevicesCache','51068OUbLMH','Error\x20in\x20uploading\x20to\x20','enc','497074sIVtBX','has','?auth=','https://','attrs','reading\x20messages','content','pkmsg','jidNormalizedUser','jidEncode','text','got\x20','72ntQQec','makeMessagesSocket','extractDeviceJids','append','encodeWAMessage','from','object','s.whatsapp.net','fetching\x20session','debug','85WheIhT','makeGroupsAdittionalSocket','446976dSzQoF','user','using\x20cache\x20for\x20devices','node-cache','privacy','account','proto','jidToSignalProtocolAddress','WA_DEFAULT_EPHEMERAL','type','emit','device-identity','application/octet-stream','../binary','935186VzuhFb','Boom','delete','disappearingMessagesInChat','map','key','encryptSenderKeyMsgSignalProto','url','encryptSignalProto','mediaCache','__esModule','1YXSJge','trace'];a11_0x50b7=function(){return _0x150158;};return a11_0x50b7();}function a11_0x4bff(_0x1b3ef3,_0x406bc1){const _0x50b78c=a11_0x50b7();return a11_0x4bff=function(_0x4bff6a,_0x17197a){_0x4bff6a=_0x4bff6a-0xe5;let _0x6938c5=_0x50b78c[_0x4bff6a];return _0x6938c5;},a11_0x4bff(_0x1b3ef3,_0x406bc1);}const got_1=__importDefault(require(a11_0x4d7e43(0xe8))),boom_1=require(a11_0x4d7e43(0x13d)),normalize_1=require('../normalize'),bin_1=require(a11_0x4d7e43(0x142)),binary_1=require(a11_0x4d7e43(0x12e)),mode_1=require('../mode'),groups_aditionais_1=require(a11_0x4d7e43(0xfa)),node_cache_1=__importDefault(require(a11_0x4d7e43(0x124))),makeMessagesSocket=_0x33d1a1=>{const _0x3b0689=a11_0x4d7e43,{logger:_0x394eab}=_0x33d1a1,_0x451e79=(0x0,groups_aditionais_1[_0x3b0689(0x120)])(_0x33d1a1),{ev:_0x29dd0b,authState:_0x464c26,query:_0x2a8f2f,generateMessageTag:_0x2ecd8b,sendNode:_0x5e624f,groupMetadata:_0x28edd6,groupToggleEphemeral:_0x3c4015}=_0x451e79,_0x908e6e=_0x33d1a1[_0x3b0689(0x105)]||new node_cache_1[(_0x3b0689(0x148))]({'stdTTL':0x12c,'useClones':![]});let _0x49c0c5;const _0x2d5ad5=async(_0x42004f=![])=>{const _0x2e15b8=_0x3b0689;if(!_0x49c0c5||_0x42004f){const _0x64856c=await _0x2a8f2f({'tag':'iq','attrs':{'xmlns':_0x2e15b8(0x125),'to':bin_1[_0x2e15b8(0x150)],'type':_0x2e15b8(0x14e)},'content':[{'tag':_0x2e15b8(0x125),'attrs':{}}]}),_0xe2ab68=(0x0,bin_1[_0x2e15b8(0xfe)])(_0x64856c,'category');_0x49c0c5=_0xe2ab68['reduce']((_0x4e9123,{attrs:_0x5579f6})=>{const _0x4e159c=_0x2e15b8;return _0x4e9123[_0x5579f6[_0x4e159c(0xec)]]=_0x5579f6[_0x4e159c(0x147)],_0x4e9123;},{});}return _0x49c0c5;};let _0x1816a3;const _0x2440a1=async(_0x486b94=![])=>{const _0x1b0a41=_0x3b0689;let _0x1b3792=await _0x1816a3;return(!_0x1b3792||_0x486b94||new Date()[_0x1b0a41(0x15e)]()-_0x1b3792[_0x1b0a41(0x15d)][_0x1b0a41(0x15e)]()>_0x1b3792[_0x1b0a41(0x15a)]*0x3e8)&&(_0x1816a3=(async()=>{const _0xc9d858=_0x1b0a41,_0x11b602=await _0x2a8f2f({'tag':'iq','attrs':{'type':_0xc9d858(0x140),'xmlns':_0xc9d858(0xe9),'to':bin_1[_0xc9d858(0x150)]},'content':[{'tag':'media_conn','attrs':{}}]}),_0xc507b4=(0x0,bin_1[_0xc9d858(0xf5)])(_0x11b602,_0xc9d858(0x146)),_0x145d62={'hosts':(0x0,bin_1['getBinaryNodeChildren'])(_0xc507b4,_0xc9d858(0x13c))[_0xc9d858(0x133)](_0x2df4d2=>_0x2df4d2[_0xc9d858(0x10d)]),'auth':_0xc507b4['attrs'][_0xc9d858(0x104)],'ttl':+_0xc507b4[_0xc9d858(0x10d)]['ttl'],'fetchDate':new Date()};return _0x394eab[_0xc9d858(0x11e)](_0xc9d858(0x153)),_0x145d62;})()),_0x1816a3;},_0x3cb741=async(_0x16a5ba,_0x49a90b,_0x38536b,_0x25b794)=>{const _0x3c965e=_0x3b0689,_0x52fb69={'tag':'receipt','attrs':{'id':_0x38536b[0x0],'t':Date['now']()[_0x3c965e(0x13f)](),'to':_0x16a5ba}};_0x25b794&&(_0x52fb69['attrs']['type']=_0x25b794);_0x49a90b&&(_0x52fb69[_0x3c965e(0x10d)]['participant']=_0x49a90b);const _0x2b663c=_0x38536b[_0x3c965e(0xe5)](0x1);_0x2b663c['length']&&(_0x52fb69[_0x3c965e(0x10f)]=[{'tag':'list','attrs':{},'content':_0x2b663c['map'](_0x4ab3d8=>({'tag':_0x3c965e(0xff),'attrs':{'id':_0x4ab3d8}}))}]),_0x394eab[_0x3c965e(0x11e)]({'jid':_0x16a5ba,'messageIds':_0x38536b},_0x3c965e(0x10e)),await _0x5e624f(_0x52fb69);},_0x23afd4=(_0x57e5a0,_0x1a9f8f,_0x4236e8)=>{return _0x3cb741(_0x57e5a0,_0x1a9f8f,_0x4236e8,undefined);},_0x36e0e9=async(_0x152480,_0x2b8f8d,_0x276d5e)=>{const _0x4f57ea=_0x3b0689,_0x2cacb2=await _0x2d5ad5(),_0x23531d=_0x2cacb2[_0x4f57ea(0xfd)]===_0x4f57ea(0xf8)?_0x4f57ea(0x144):_0x4f57ea(0xf2);return _0x3cb741(_0x152480,_0x2b8f8d,_0x276d5e,_0x23531d);},_0x547489=async(_0x42d682,_0x4e816b)=>{const _0x45b104=_0x3b0689,_0x2eade5=[],_0x57ff15=[];_0x42d682=Array[_0x45b104(0x11a)](new Set(_0x42d682));for(let _0x2d47bb of _0x42d682){const _0x406cc0=(0x0,bin_1[_0x45b104(0x13e)])(_0x2d47bb)[_0x45b104(0x122)];_0x2d47bb=(0x0,bin_1[_0x45b104(0x111)])(_0x2d47bb);if(_0x908e6e[_0x45b104(0x10a)](_0x406cc0)){const _0x197823=_0x908e6e[_0x45b104(0x14e)](_0x406cc0);_0x2eade5[_0x45b104(0x103)](..._0x197823),_0x394eab[_0x45b104(0x13b)]({'user':_0x406cc0},_0x45b104(0x123));}else _0x57ff15[_0x45b104(0x103)]({'tag':_0x45b104(0x122),'attrs':{'jid':_0x2d47bb}});}const _0x2cb796={'tag':'iq','attrs':{'to':bin_1[_0x45b104(0x150)],'type':'get','xmlns':_0x45b104(0x14f)},'content':[{'tag':_0x45b104(0x14f),'attrs':{'sid':_0x2ecd8b(),'mode':_0x45b104(0x145),'last':_0x45b104(0xf3),'index':'0','context':_0x45b104(0x156)},'content':[{'tag':_0x45b104(0x145),'attrs':{},'content':[{'tag':'devices','attrs':{'version':'2'}}]},{'tag':_0x45b104(0xf1),'attrs':{},'content':_0x57ff15}]}]},_0x18ee40=await _0x2a8f2f(_0x2cb796),{device:_0x467801}=(0x0,bin_1[_0x45b104(0x13e)])(_0x464c26[_0x45b104(0x159)]['me']['id']),_0x1b62eb=(0x0,normalize_1[_0x45b104(0x117)])(_0x18ee40,_0x467801,_0x4e816b),_0x16c6e3={};for(const _0x1a1c0d of _0x1b62eb){_0x16c6e3[_0x1a1c0d[_0x45b104(0x122)]]=_0x16c6e3[_0x1a1c0d[_0x45b104(0x122)]]||[],_0x16c6e3[_0x1a1c0d[_0x45b104(0x122)]][_0x45b104(0x103)](_0x1a1c0d),_0x2eade5[_0x45b104(0x103)](_0x1a1c0d);}for(const _0x56ddaf in _0x16c6e3){_0x908e6e[_0x45b104(0x140)](_0x56ddaf,_0x16c6e3[_0x56ddaf]);}return _0x2eade5;},_0x2c54fb=async(_0x6e4eea,_0xc8bd6)=>{const _0x4af085=_0x3b0689,_0x432cd3=(0x0,normalize_1[_0x4af085(0x128)])(_0x6e4eea)['toString'](),_0xe1cfc8=await _0x464c26[_0x4af085(0x14b)][_0x4af085(0x14d)](_0x432cd3);if(!_0xe1cfc8||_0xc8bd6){_0x394eab[_0x4af085(0x11e)]({'jid':_0x6e4eea},_0x4af085(0x11d));const _0x1d2b25={'tag':_0x4af085(0x122),'attrs':{'jid':_0x6e4eea,'reason':_0x4af085(0xea)}},_0x5af360=await _0x2a8f2f({'tag':'iq','attrs':{'xmlns':_0x4af085(0x157),'type':_0x4af085(0x14e),'to':bin_1[_0x4af085(0x150)]},'content':[{'tag':'key','attrs':{},'content':[_0x1d2b25]}]});return await(0x0,normalize_1['parseAndInjectE2ESession'])(_0x5af360,_0x464c26),!![];}return![];},_0x11f606=async(_0x373e74,_0x43b865)=>{const _0x259adb=_0x3b0689;await _0x2c54fb(_0x373e74,![]);const {type:_0x396d34,ciphertext:_0x5908b1}=await(0x0,normalize_1[_0x259adb(0x137)])(_0x373e74,_0x43b865,_0x464c26),_0x3cc41e={'tag':'to','attrs':{'jid':_0x373e74},'content':[{'tag':'enc','attrs':{'v':'2','type':_0x396d34},'content':_0x5908b1}]};return _0x3cc41e;},_0x548aaa=async(_0x350f61,_0x3fb797,{messageId:_0x314c91,additionalAttributes:_0x15a626,cachedGroupMetadata:_0x2b2a34})=>{const _0xe46aff=_0x3b0689,{user:_0x3c7b3e,server:_0x5dbc5b}=(0x0,bin_1[_0xe46aff(0x13e)])(_0x350f61),_0x5a8c3e=_0x5dbc5b==='g.us';_0x314c91=_0x314c91||(0x0,normalize_1['generateMessageID'])();const _0x40f261=(0x0,normalize_1['encodeWAMessage'])(_0x3fb797),_0x19d095=[];let _0x3f9aca;const _0x48c0a7=(0x0,bin_1[_0xe46aff(0x112)])(_0x3c7b3e,_0x5a8c3e?_0xe46aff(0x151):_0xe46aff(0x11c));if(_0x5a8c3e){const {ciphertext:_0x431f47,senderKeyDistributionMessageKey:_0x3f5ff5}=await(0x0,normalize_1[_0xe46aff(0x135)])(_0x48c0a7,_0x40f261,_0x464c26[_0xe46aff(0x159)]['me']['id'],_0x464c26);let _0xb53e4f=_0x2b2a34?await _0x2b2a34(_0x350f61):undefined;if(!_0xb53e4f)_0xb53e4f=await _0x28edd6(_0x350f61);const _0x191397=_0xb53e4f[_0xe46aff(0xfc)][_0xe46aff(0x133)](_0x2ac2f9=>_0x2ac2f9['id']),_0x387955=await _0x547489(_0x191397,![]);_0x394eab[_0xe46aff(0x11e)](_0xe46aff(0x114)+_0x387955[_0xe46aff(0xe7)]+_0xe46aff(0x14a));const _0x38bdb5=(0x0,normalize_1[_0xe46aff(0x119)])({'senderKeyDistributionMessage':{'axolotlSenderKeyDistributionMessage':_0x3f5ff5,'groupId':_0x48c0a7}});for(const {user:_0x5d26a5,device:_0xffef45}of _0x387955){const _0x92f414=(0x0,bin_1[_0xe46aff(0x112)])(_0x5d26a5,_0xe46aff(0x11c),_0xffef45),_0x341024=await _0x11f606(_0x92f414,_0x38bdb5);_0x19d095[_0xe46aff(0x103)](_0x341024);}const _0x216ef4=[];!!_0x19d095[_0xe46aff(0xef)](_0x4f5cfc=>!!_0x4f5cfc[_0xe46aff(0x10f)]['find'](({attrs:_0x1fa3cc})=>_0x1fa3cc[_0xe46aff(0x12a)]==_0xe46aff(0x110)))&&_0x216ef4[_0xe46aff(0x103)]({'tag':'participants','attrs':{},'content':_0x19d095}),_0x216ef4[_0xe46aff(0x103)]({'tag':_0xe46aff(0x108),'attrs':{'v':'2','type':_0xe46aff(0x100)},'content':_0x431f47}),_0x3f9aca={'tag':'message','attrs':{'id':_0x314c91,'type':_0xe46aff(0x113),'to':_0x48c0a7},'content':_0x216ef4};}else{const {user:_0x1652a9}=(0x0,bin_1[_0xe46aff(0x13e)])(_0x464c26[_0xe46aff(0x159)]['me']['id']),_0x10607c={'deviceSentMessage':{'destinationJid':_0x48c0a7,'message':_0x3fb797}},_0x4dc2db=(0x0,normalize_1['encodeWAMessage'])(_0x10607c);_0x19d095[_0xe46aff(0x103)](await _0x11f606((0x0,bin_1[_0xe46aff(0x112)])(_0x3c7b3e,_0xe46aff(0x11c)),_0x40f261)),_0x19d095[_0xe46aff(0x103)](await _0x11f606((0x0,bin_1[_0xe46aff(0x112)])(_0x1652a9,_0xe46aff(0x11c)),_0x4dc2db));const _0x217bcb=await _0x547489([_0x464c26['creds']['me']['id'],_0x350f61],!![]);_0x394eab[_0xe46aff(0x11e)](_0xe46aff(0x114)+_0x217bcb[_0xe46aff(0xe7)]+_0xe46aff(0x14a));for(const {user:_0x9ed66a,device:_0x42562e}of _0x217bcb){const _0x1ae008=_0x9ed66a===_0x1652a9;_0x19d095[_0xe46aff(0x103)](await _0x11f606((0x0,bin_1[_0xe46aff(0x112)])(_0x9ed66a,'s.whatsapp.net',_0x42562e),_0x1ae008?_0x4dc2db:_0x40f261));}_0x3f9aca={'tag':'message','attrs':{'id':_0x314c91,'type':_0xe46aff(0x113),'to':_0x48c0a7,..._0x15a626||{}},'content':[{'tag':_0xe46aff(0xfc),'attrs':{},'content':_0x19d095}]};}const _0x2e6f5f=!!_0x19d095[_0xe46aff(0xef)](_0x505535=>!!_0x505535[_0xe46aff(0x10f)]['find'](({attrs:_0x3b07b2})=>_0x3b07b2[_0xe46aff(0x12a)]==_0xe46aff(0x110)));return _0x2e6f5f&&_0x3f9aca[_0xe46aff(0x10f)][_0xe46aff(0x103)]({'tag':_0xe46aff(0x12c),'attrs':{},'content':binary_1[_0xe46aff(0x127)]['ADVSignedDeviceIdentity'][_0xe46aff(0x101)](_0x464c26['creds'][_0xe46aff(0x126)])['finish']()}),_0x394eab['debug']({'msgId':_0x314c91},_0xe46aff(0xed)),await _0x5e624f(_0x3f9aca),_0x314c91;},_0x15b38e=async(_0x45dd12,{mediaType:_0x575137,fileEncSha256B64:_0x187693,timeoutMs:_0x5a4ff6})=>{const _0x5c348e=_0x3b0689;let _0x3b2503=await _0x2440a1(![]),_0x3174fd;for(let _0x3c9b17 of _0x3b2503[_0x5c348e(0x14c)]){const _0x3cf1af=encodeURIComponent(_0x3b2503[_0x5c348e(0x104)]),_0x3f8c91=_0x5c348e(0x10c)+_0x3c9b17[_0x5c348e(0xf0)]+mode_1['MEDIA_PATH_MAP'][_0x575137]+'/'+_0x187693+_0x5c348e(0x10b)+_0x3cf1af+_0x5c348e(0x15b)+_0x187693;try{const {body:_0x36f7fd}=await got_1[_0x5c348e(0x148)][_0x5c348e(0x152)](_0x3f8c91,{'headers':{'Content-Type':_0x5c348e(0x12d),'Origin':mode_1[_0x5c348e(0xe6)]},'agent':{'https':_0x33d1a1[_0x5c348e(0x141)]},'body':_0x45dd12,'timeout':_0x5a4ff6}),_0x1d9585=JSON['parse'](_0x36f7fd);_0x3174fd=_0x1d9585===null||_0x1d9585===void 0x0?void 0x0:_0x1d9585[_0x5c348e(0x136)];if(_0x3174fd)break;else{_0x3b2503=await _0x2440a1(!![]);throw new Error(_0x5c348e(0xfb)+JSON[_0x5c348e(0x158)](_0x1d9585));}}catch(_0x3aba88){const _0x3f5e9e=_0x3c9b17['hostname']===_0x3b2503[_0x5c348e(0x14c)][_0x3b2503[_0x5c348e(0x14c)]['length']-0x1][_0x5c348e(0xf0)];_0x394eab[_0x5c348e(0x11e)](_0x5c348e(0x107)+_0x3c9b17[_0x5c348e(0xf0)]+'\x20('+_0x3aba88+')\x20'+(_0x3f5e9e?'':_0x5c348e(0xeb)));}}if(!_0x3174fd)throw new boom_1[(_0x5c348e(0x130))]('Media\x20upload\x20failed\x20on\x20all\x20hosts',{'statusCode':0x1f4});return{'mediaUrl':_0x3174fd};};return{..._0x451e79,'assertSession':_0x2c54fb,'relayMessage':_0x548aaa,'sendDeliveryReceipt':_0x23afd4,'sendReadReceipt':_0x36e0e9,'refreshMediaConn':_0x2440a1,'waUploadToServer':_0x15b38e,'fetchPrivacySettings':_0x2d5ad5,'sendMessage':async(_0x2aed9e,_0x1c50ca,_0x5dec2f={})=>{const _0x5ddedb=_0x3b0689,_0x60144a=_0x464c26['creds']['me']['id'];if(typeof _0x1c50ca===_0x5ddedb(0x11b)&&_0x5ddedb(0x132)in _0x1c50ca&&typeof _0x1c50ca[_0x5ddedb(0x132)]!==_0x5ddedb(0x154)&&(0x0,bin_1['isJidGroup'])(_0x2aed9e)){const {disappearingMessagesInChat:_0xd7fd4b}=_0x1c50ca,_0x183b4f=typeof _0xd7fd4b===_0x5ddedb(0xf7)?_0xd7fd4b?mode_1[_0x5ddedb(0x129)]:0x0:_0xd7fd4b;await _0x3c4015(_0x2aed9e,_0x183b4f);}else{const _0x2ea136=await(0x0,normalize_1[_0x5ddedb(0xf6)])(_0x2aed9e,_0x1c50ca,{..._0x5dec2f,'logger':_0x394eab,'userJid':_0x60144a,'upload':_0x15b38e,'mediaCache':_0x33d1a1[_0x5ddedb(0x138)]}),_0x18c653=_0x5ddedb(0x131)in _0x1c50ca&&!!_0x1c50ca['delete'],_0x331c09={};return _0x18c653&&(_0x331c09[_0x5ddedb(0x143)]='7'),await _0x548aaa(_0x2aed9e,_0x2ea136[_0x5ddedb(0x156)],{'messageId':_0x2ea136[_0x5ddedb(0x134)]['id'],'additionalAttributes':_0x331c09}),_0x33d1a1[_0x5ddedb(0x15c)]&&process['nextTick'](()=>{const _0x30c685=_0x5ddedb;_0x29dd0b[_0x30c685(0x12b)](_0x30c685(0xee),{'messages':[_0x2ea136],'type':_0x30c685(0x118)});}),_0x2ea136;}}};};exports[a11_0x4d7e43(0x116)]=makeMessagesSocket;