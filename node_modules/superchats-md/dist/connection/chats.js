'use strict';const a3_0x1fd354=a3_0x191f;function a3_0x40b4(){const _0x2fed5b=['account_sync','../normalize','blocklist','pushNameSetting','1521288HSuxbv','version','getBinaryNodeChildren','messages.delete','keys','values','unreadCount','jidNormalizedUser','muteAction','preview','error','getBinaryNodeChild','4208667GQJNku','__importDefault','usync','interactive','available','setAppStateSyncVersion','status','recv\x20invalid\x20presence\x20node','length','contact','mute','2725150OJXWid','decodePatches','newMutations','true','S_WHATSAPP_NET','4975064zlmFtE','CB:presence','encode','critical_block','muted','attrs','clearChatAction','unavailable','markChatAsReadAction','url','./messages-send','failed\x20to\x20sync\x20state','fullName','get','5mtbPca','info','presence','11IyqXQw','connection.update','SyncdPatch','type','participant','exists','emit','archiveChatAction','map','getAppStateSyncVersion','requesting\x20account\x20sync','creds','7GNYetG','CB:chatstate','mutex','sync','catch','presence.update','../binary','from','creds.update','contacts.upsert','../normalize/make-mutex','stack','tag','extractSyncdPatches','86DyNQQH','isArray','contactAction','collection','chatModificationToAppPatch','clean','7811AgqQoi','filter','makeChatsSocket','query','name','set','false','patch','open','toString','2979lEICIA','subscribe','4304OapZMv','read','__esModule','defineProperty','generateProfilePicture','critical_unblock_low','jid','muteEndTimestamp','archive','emitOwnEvents','toNumber','picture','19720164FutboO','list','user'];a3_0x40b4=function(){return _0x2fed5b;};return a3_0x40b4();}(function(_0x45393a,_0x394e64){const _0x267d6a=a3_0x191f,_0x950005=_0x45393a();while(!![]){try{const _0x500f2e=parseInt(_0x267d6a(0x16d))/0x1*(-parseInt(_0x267d6a(0x1d3))/0x2)+-parseInt(_0x267d6a(0x198))/0x3+parseInt(_0x267d6a(0x1a8))/0x4*(parseInt(_0x267d6a(0x1b6))/0x5)+-parseInt(_0x267d6a(0x18c))/0x6*(parseInt(_0x267d6a(0x1c5))/0x7)+-parseInt(_0x267d6a(0x179))/0x8*(parseInt(_0x267d6a(0x177))/0x9)+parseInt(_0x267d6a(0x1a3))/0xa+parseInt(_0x267d6a(0x1b9))/0xb*(parseInt(_0x267d6a(0x185))/0xc);if(_0x500f2e===_0x394e64)break;else _0x950005['push'](_0x950005['shift']());}catch(_0x5e4457){_0x950005['push'](_0x950005['shift']());}}}(a3_0x40b4,0xf1838));var __importDefault=this&&this[a3_0x1fd354(0x199)]||function(_0x46cd8d){return _0x46cd8d&&_0x46cd8d['__esModule']?_0x46cd8d:{'default':_0x46cd8d};};Object[a3_0x1fd354(0x17c)](exports,a3_0x1fd354(0x17b),{'value':!![]}),exports['makeChatsSocket']=void 0x0;function a3_0x191f(_0x4bf3de,_0x48ee64){const _0x40b4b7=a3_0x40b4();return a3_0x191f=function(_0x191fac,_0x513ff4){_0x191fac=_0x191fac-0x16a;let _0x38d928=_0x40b4b7[_0x191fac];return _0x38d928;},a3_0x191f(_0x4bf3de,_0x48ee64);}const bin_1=require('../bin'),binary_1=require(a3_0x1fd354(0x1cb)),normalize_1=require(a3_0x1fd354(0x189)),messages_send_1=require(a3_0x1fd354(0x1b2)),make_mutex_1=__importDefault(require(a3_0x1fd354(0x1cf))),makeChatsSocket=_0x19c095=>{const _0x4a6c4a=a3_0x1fd354,{logger:_0x46b1a5}=_0x19c095,_0x56a33b=(0x0,messages_send_1['makeMessagesSocket'])(_0x19c095),{ev:_0x52117b,ws:_0x4b6ca4,authState:_0x22962d,generateMessageTag:_0xa055e6,sendNode:_0x6b302e,query:_0x533216,fetchPrivacySettings:_0x2f80fd}=_0x56a33b,_0x401d4c=(0x0,make_mutex_1['default'])(),_0x3c1dec=async(_0x23e499,_0x569e7c)=>{const _0x3f03df=a3_0x191f,_0x375629=await _0x533216({'tag':'iq','attrs':{'to':bin_1[_0x3f03df(0x1a7)],'type':'get','xmlns':_0x3f03df(0x19a)},'content':[{'tag':_0x3f03df(0x19a),'attrs':{'sid':_0xa055e6(),'mode':'query','last':_0x3f03df(0x1a6),'index':'0','context':_0x3f03df(0x19b)},'content':[{'tag':_0x3f03df(0x170),'attrs':{},'content':[_0x569e7c]},{'tag':_0x3f03df(0x186),'attrs':{},'content':_0x23e499}]}]}),_0x5c8a99=(0x0,bin_1[_0x3f03df(0x197)])(_0x375629,_0x3f03df(0x19a)),_0x1ee42e=(0x0,bin_1[_0x3f03df(0x197)])(_0x5c8a99,'list'),_0x48f46b=(0x0,bin_1[_0x3f03df(0x18e)])(_0x1ee42e,'user');return _0x48f46b;},_0x5071ed=async(..._0x819532)=>{const _0xa854d6=a3_0x191f,_0x1b3b09=await _0x3c1dec([{'tag':_0xa854d6(0x187),'attrs':{},'content':_0x819532['map'](_0x11d671=>({'tag':'contact','attrs':{},'content':'+'+_0x11d671}))}],{'tag':_0xa854d6(0x1a1),'attrs':{}});return _0x1b3b09[_0xa854d6(0x1c1)](_0x985bf8=>{const _0x5ac94b=_0xa854d6,_0x166092=(0x0,bin_1[_0x5ac94b(0x197)])(_0x985bf8,_0x5ac94b(0x1a1));return{'exists':_0x166092[_0x5ac94b(0x1ad)][_0x5ac94b(0x1bc)]==='in','jid':_0x985bf8[_0x5ac94b(0x1ad)][_0x5ac94b(0x17f)]};})[_0xa854d6(0x16e)](_0x1149e4=>_0x1149e4[_0xa854d6(0x1be)]);},_0x24a8a6=async _0x4882a4=>{const _0x4dde88=a3_0x191f,[_0x31248c]=await _0x3c1dec([{'tag':_0x4dde88(0x187),'attrs':{'jid':_0x4882a4}}],{'tag':_0x4dde88(0x19e),'attrs':{}});if(_0x31248c){const _0x5b1231=(0x0,bin_1['getBinaryNodeChild'])(_0x31248c,_0x4dde88(0x19e));return{'status':_0x5b1231['content'][_0x4dde88(0x176)](),'setAt':new Date(+_0x5b1231[_0x4dde88(0x1ad)]['t']*0x3e8)};}},_0x5f5c42=async(_0x240b1d,_0x2a3af1)=>{const _0x5a8862=a3_0x191f,{img:_0x36c6cd}=await(0x0,normalize_1[_0x5a8862(0x17d)])(_0x2a3af1);await _0x533216({'tag':'iq','attrs':{'to':(0x0,bin_1['jidNormalizedUser'])(_0x240b1d),'type':_0x5a8862(0x172),'xmlns':'w:profile:picture'},'content':[{'tag':_0x5a8862(0x184),'attrs':{'type':'image'},'content':_0x36c6cd}]});},_0x34afd5=async()=>{const _0x2e2725=a3_0x191f,_0x5583f7=await _0x533216({'tag':'iq','attrs':{'xmlns':_0x2e2725(0x18a),'to':bin_1[_0x2e2725(0x1a7)],'type':_0x2e2725(0x1b5)}});return _0x5583f7;},_0x19129f=async(_0x211ede,_0x3e4378)=>{const _0x5454f5=a3_0x191f;await _0x533216({'tag':'iq','attrs':{'to':bin_1[_0x5454f5(0x1a7)],'type':'set'},'content':[{'tag':'item','attrs':{'action':_0x3e4378,'jid':_0x211ede}}]});},_0x5d2e0f=async _0x6da30c=>{const _0x16d1aa=a3_0x191f;_0x46b1a5[_0x16d1aa(0x1b7)]({'fromTimestamp':_0x6da30c},_0x16d1aa(0x1c3)),await _0x6b302e({'tag':'iq','attrs':{'to':bin_1[_0x16d1aa(0x1a7)],'type':_0x16d1aa(0x172),'xmlns':'urn:xmpp:whatsapp:dirty','id':_0xa055e6()},'content':[{'tag':_0x16d1aa(0x16c),'attrs':{'type':_0x16d1aa(0x188),'timestamp':_0x6da30c['toString']()}}]});},_0x580efa=async(_0x35a05b,_0x59b665=![],_0x19e1b1=![])=>{const _0x3783f0=a3_0x191f,_0x17db1f={};for(const _0x3c9be0 of _0x35a05b){let _0x2a9b56=_0x59b665?undefined:await _0x22962d[_0x3783f0(0x190)][_0x3783f0(0x1c2)](_0x3c9be0);if(!_0x2a9b56)_0x2a9b56={'version':0x0,'hash':Buffer['alloc'](0x80),'mutations':[]};_0x17db1f[_0x3c9be0]=_0x2a9b56;}const _0x2a46e3=await _0x533216({'tag':'iq','attrs':{'to':bin_1[_0x3783f0(0x1a7)],'xmlns':'w:sync:app:state','type':'set'},'content':[{'tag':_0x3783f0(0x1c8),'attrs':{},'content':_0x35a05b[_0x3783f0(0x1c1)](_0xd6ddf3=>({'tag':_0x3783f0(0x16a),'attrs':{'name':_0xd6ddf3,'version':_0x17db1f[_0xd6ddf3][_0x3783f0(0x18d)][_0x3783f0(0x176)](),'return_snapshot':_0x19e1b1?_0x3783f0(0x1a6):'false'}}))}]}),_0x2bdb87=(0x0,normalize_1[_0x3783f0(0x1d2)])(_0x2a46e3);for(const _0x2198b1 in _0x2bdb87){const _0x1cb369=_0x2198b1;if(_0x2bdb87[_0x1cb369][_0x3783f0(0x1a0)]){const {newMutations:_0x15cbfd,state:_0x96e05b}=await(0x0,normalize_1[_0x3783f0(0x1a4)])(_0x1cb369,_0x2bdb87[_0x1cb369],_0x17db1f[_0x1cb369],_0x22962d,!![]);await _0x22962d['keys'][_0x3783f0(0x19d)](_0x1cb369,_0x96e05b),_0x1a62c1(_0x15cbfd);}}},_0x14e974=async(_0x3378fc,_0x6463b8=_0x4a6c4a(0x195))=>{const _0x25cf31=_0x4a6c4a;var _0x11a783;_0x3378fc=(0x0,bin_1[_0x25cf31(0x193)])(_0x3378fc);const _0x4c093f=await _0x533216({'tag':'iq','attrs':{'to':_0x3378fc,'type':_0x25cf31(0x1b5),'xmlns':'w:profile:picture'},'content':[{'tag':_0x25cf31(0x184),'attrs':{'type':_0x6463b8,'query':_0x25cf31(0x1b1)}}]}),_0x1249cf=(0x0,bin_1[_0x25cf31(0x197)])(_0x4c093f,_0x25cf31(0x184));return(_0x11a783=_0x1249cf===null||_0x1249cf===void 0x0?void 0x0:_0x1249cf['attrs'])===null||_0x11a783===void 0x0?void 0x0:_0x11a783[_0x25cf31(0x1b1)];},_0x538f17=async(_0xe61f38,_0x1b6d0c)=>{const _0x6849fe=_0x4a6c4a,_0x3819bc=_0x22962d[_0x6849fe(0x1c4)]['me'];_0xe61f38===_0x6849fe(0x19c)||_0xe61f38===_0x6849fe(0x1af)?await _0x6b302e({'tag':_0x6849fe(0x1b8),'attrs':{'name':_0x3819bc[_0x6849fe(0x171)],'type':_0xe61f38}}):await _0x6b302e({'tag':'chatstate','attrs':{'from':_0x3819bc['id'],'to':_0x1b6d0c},'content':[{'tag':_0xe61f38,'attrs':{}}]});},_0x19e2f2=_0xbcfbfc=>_0x6b302e({'tag':_0x4a6c4a(0x1b8),'attrs':{'to':_0xbcfbfc,'id':_0xa055e6(),'type':_0x4a6c4a(0x178)}}),_0xce7456=({tag:_0x17d677,attrs:_0x54cfea,content:_0x2a6b5a})=>{const _0x1195ed=_0x4a6c4a;let _0x117e7e;const _0x3a3685=_0x54cfea[_0x1195ed(0x1cc)],_0x3b38ea=_0x54cfea[_0x1195ed(0x1bd)]||_0x54cfea[_0x1195ed(0x1cc)];if(_0x17d677===_0x1195ed(0x1b8))_0x117e7e={'lastKnownPresence':_0x54cfea[_0x1195ed(0x1bc)]===_0x1195ed(0x1af)?_0x1195ed(0x1af):_0x1195ed(0x19c),'lastSeen':_0x54cfea['t']?+_0x54cfea['t']:undefined};else{if(Array[_0x1195ed(0x1d4)](_0x2a6b5a)){const [_0x333e9a]=_0x2a6b5a;let _0x19b45e=_0x333e9a[_0x1195ed(0x1d1)];_0x19b45e==='paused'&&(_0x19b45e=_0x1195ed(0x19c)),_0x117e7e={'lastKnownPresence':_0x19b45e};}else _0x46b1a5[_0x1195ed(0x196)]({'tag':_0x17d677,'attrs':_0x54cfea,'content':_0x2a6b5a},_0x1195ed(0x19f));}_0x117e7e&&_0x52117b[_0x1195ed(0x1bf)](_0x1195ed(0x1ca),{'id':_0x3a3685,'presences':{[_0x3b38ea]:_0x117e7e}});},_0x8ad3fa=async()=>{const _0xf9555f=_0x4a6c4a;await _0x401d4c[_0xf9555f(0x1c7)](()=>_0x580efa([_0xf9555f(0x1ab),_0xf9555f(0x17e)]))[_0xf9555f(0x1c9)](_0x9bbfa5=>{});},_0x1a62c1=_0x3068f2=>{const _0x33c5c4=_0x4a6c4a;var _0x14456a,_0x18fb69,_0x4c627d,_0x2f509c;const _0x46b335={},_0x3b1c5f={},_0x5ab6fb=[];for(const {action:_0x2831f8,index:[_0x2ce97d,_0x574ad5,_0x35c19a,_0x968443]}of _0x3068f2){const _0x3a5221={'id':_0x574ad5};if(_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8[_0x33c5c4(0x194)])_0x3a5221[_0x33c5c4(0x1a2)]=((_0x14456a=_0x2831f8[_0x33c5c4(0x194)])===null||_0x14456a===void 0x0?void 0x0:_0x14456a[_0x33c5c4(0x1ac)])?(0x0,normalize_1[_0x33c5c4(0x183)])(_0x2831f8[_0x33c5c4(0x194)][_0x33c5c4(0x180)]):undefined;else{if(_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8['archiveChatAction'])_0x3a5221[_0x33c5c4(0x181)]=!!((_0x18fb69=_0x2831f8[_0x33c5c4(0x1c0)])===null||_0x18fb69===void 0x0?void 0x0:_0x18fb69['archived']);else{if(_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8['markChatAsReadAction'])_0x3a5221[_0x33c5c4(0x192)]=!!((_0x4c627d=_0x2831f8[_0x33c5c4(0x1b0)])===null||_0x4c627d===void 0x0?void 0x0:_0x4c627d[_0x33c5c4(0x17a)])?0x0:-0x1;else{if(_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8[_0x33c5c4(0x1ae)])_0x5ab6fb['push']({'remoteJid':_0x574ad5,'id':_0x35c19a,'fromMe':_0x968443==='1'});else{if(_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8['contactAction'])_0x3b1c5f[_0x574ad5]={..._0x3b1c5f[_0x574ad5]||{},'id':_0x574ad5,'name':_0x2831f8[_0x33c5c4(0x1d5)][_0x33c5c4(0x1b4)]};else{if(_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8[_0x33c5c4(0x18b)]){const _0x3957ca={..._0x22962d[_0x33c5c4(0x1c4)]['me'],'name':(_0x2f509c=_0x2831f8===null||_0x2831f8===void 0x0?void 0x0:_0x2831f8['pushNameSetting'])===null||_0x2f509c===void 0x0?void 0x0:_0x2f509c['name']};_0x52117b[_0x33c5c4(0x1bf)](_0x33c5c4(0x1cd),{'me':_0x3957ca});}else{}}}}}}Object['keys'](_0x3a5221)[_0x33c5c4(0x1a0)]>0x1&&(_0x46b335[_0x3a5221['id']]={..._0x46b335[_0x3a5221['id']]||{},..._0x3a5221});}Object['values'](_0x46b335)[_0x33c5c4(0x1a0)]&&_0x52117b[_0x33c5c4(0x1bf)]('chats.update',Object[_0x33c5c4(0x191)](_0x46b335)),Object[_0x33c5c4(0x191)](_0x3b1c5f)['length']&&_0x52117b[_0x33c5c4(0x1bf)](_0x33c5c4(0x1ce),Object['values'](_0x3b1c5f)),_0x5ab6fb[_0x33c5c4(0x1a0)]&&_0x52117b[_0x33c5c4(0x1bf)](_0x33c5c4(0x18f),{'keys':_0x5ab6fb});},_0x13b8b9=async _0x3d2318=>{const _0x1446be=_0x4a6c4a,_0x294643=_0x3d2318[_0x1446be(0x1bc)];await _0x401d4c[_0x1446be(0x1c7)](async()=>{const _0x4fe4e5=_0x1446be;try{await _0x580efa([_0x294643]);}catch(_0x335d92){_0x46b1a5['info']({'name':_0x294643,'error':_0x335d92[_0x4fe4e5(0x1d0)]},'failed\x20to\x20sync\x20state\x20from\x20version,\x20trying\x20from\x20scratch'),await _0x580efa([_0x294643],!![]);}const {patch:_0x2a812f,state:_0x22a237}=await(0x0,normalize_1['encodeSyncdPatch'])(_0x3d2318,_0x22962d),_0x12f561=await _0x22962d['keys'][_0x4fe4e5(0x1c2)](_0x294643),_0x14aacc=await(0x0,normalize_1[_0x4fe4e5(0x1a4)])(_0x294643,[{..._0x2a812f,'version':{'version':_0x22a237[_0x4fe4e5(0x18d)]}}],_0x12f561,_0x22962d),_0x51e410={'tag':'iq','attrs':{'to':bin_1[_0x4fe4e5(0x1a7)],'type':'set','xmlns':'w:sync:app:state'},'content':[{'tag':'sync','attrs':{},'content':[{'tag':_0x4fe4e5(0x16a),'attrs':{'name':_0x294643,'version':(_0x22a237[_0x4fe4e5(0x18d)]-0x1)[_0x4fe4e5(0x176)](),'return_snapshot':_0x4fe4e5(0x173)},'content':[{'tag':_0x4fe4e5(0x174),'attrs':{},'content':binary_1['proto'][_0x4fe4e5(0x1bb)][_0x4fe4e5(0x1aa)](_0x2a812f)['finish']()}]}]}]};await _0x533216(_0x51e410),await _0x22962d[_0x4fe4e5(0x190)][_0x4fe4e5(0x19d)](_0x294643,_0x22a237),_0x19c095[_0x4fe4e5(0x182)]&&_0x1a62c1(_0x14aacc[_0x4fe4e5(0x1a5)]);});},_0x29b93d=(_0x12e026,_0x16f6f2,_0x17a973)=>{const _0xcad4e4=_0x4a6c4a,_0x566445=(0x0,normalize_1[_0xcad4e4(0x16b)])(_0x12e026,_0x16f6f2,_0x17a973);return _0x13b8b9(_0x566445);};return _0x4b6ca4['on'](_0x4a6c4a(0x1a9),_0xce7456),_0x4b6ca4['on'](_0x4a6c4a(0x1c6),_0xce7456),_0x4b6ca4['on']('CB:notification,type:server_sync',_0x466558=>{const _0x5ddb68=_0x4a6c4a,_0x56a8d1=(0x0,bin_1['getBinaryNodeChild'])(_0x466558,_0x5ddb68(0x16a));try{if(_0x56a8d1){const _0x77f477=_0x56a8d1['attrs'][_0x5ddb68(0x171)];_0x401d4c[_0x5ddb68(0x1c7)](async()=>{const _0x557873=_0x5ddb68;await _0x580efa([_0x77f477],![])[_0x557873(0x1c9)](_0x226001=>_0x46b1a5[_0x557873(0x196)]({'trace':_0x226001[_0x557873(0x1d0)],'node':_0x466558},_0x557873(0x1b3)));});}}catch(_0xe60961){}}),_0x52117b['on'](_0x4a6c4a(0x1ba),({connection:_0x225daa})=>{const _0x1c7c8=_0x4a6c4a;_0x225daa===_0x1c7c8(0x175)&&(_0x538f17(_0x1c7c8(0x19c)),_0x34afd5(),_0x2f80fd(),_0x8ad3fa());}),{..._0x56a33b,'appPatch':_0x13b8b9,'sendPresenceUpdate':_0x538f17,'presenceSubscribe':_0x19e2f2,'profilePictureUrl':_0x14e974,'onWhatsApp':_0x5071ed,'fetchBlocklist':_0x34afd5,'fetchStatus':_0x24a8a6,'updateProfilePicture':_0x5f5c42,'updateBlockStatus':_0x19129f,'resyncAppState':_0x580efa,'chatModify':_0x29b93d,'resyncMainAppState':_0x8ad3fa};};exports[a3_0x1fd354(0x16f)]=makeChatsSocket;